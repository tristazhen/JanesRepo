{"version":3,"sources":["webpack://olms/webpack/bootstrap","webpack://olms/./node_modules/ol/asserts.js","webpack://olms/./node_modules/ol/index.js","webpack://olms/./stylefunction.js","webpack://olms/./node_modules/mapbox-to-css-font/index.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/function/index.js","webpack://olms/external \"ol.source.XYZ\"","webpack://olms/external \"ol.source.VectorTile\"","webpack://olms/external \"ol.source.Vector\"","webpack://olms/external \"ol.source.TileJSON\"","webpack://olms/external \"ol.layer.VectorTile\"","webpack://olms/external \"ol.layer.Vector\"","webpack://olms/external \"ol.layer.Tile\"","webpack://olms/external \"ol.Observable\"","webpack://olms/external \"ol.format.MVT\"","webpack://olms/external \"ol.format.GeoJSON\"","webpack://olms/external \"ol.Map\"","webpack://olms/external \"ol.tilegrid\"","webpack://olms/external \"ol.proj\"","webpack://olms/./node_modules/webfont-matcher/lib/fonts/google.js","webpack://olms/./util.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/feature_filter/index.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/util/ref_properties.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/deref.js","webpack://olms/external \"ol.geom.Point\"","webpack://olms/external \"ol.style.Circle\"","webpack://olms/./node_modules/ol/style/TextPlacement.js","webpack://olms/./node_modules/ol/math.js","webpack://olms/./node_modules/ol/AssertionError.js","webpack://olms/./node_modules/ol/color.js","webpack://olms/./node_modules/ol/style/Fill.js","webpack://olms/./node_modules/ol/style/Text.js","webpack://olms/external \"ol.style.Icon\"","webpack://olms/external \"ol.style.Stroke\"","webpack://olms/external \"ol.style.Fill\"","webpack://olms/external \"ol.style.Style\"","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/util/interpolate.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/util/get_type.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/util/extend.js","webpack://olms/./node_modules/csscolorparser/csscolorparser.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/util/parse_color.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/function/color_spaces.js","webpack://olms/./index.js","webpack://olms/./olms.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","assert","assertion","errorCode","_AssertionError2","default","_AssertionError","inherits","childCtor","parentCtor","create","constructor","getUid","obj","ol_uid","uidCounter_","VERSION","olLayer","glStyle","source","resolutions","spriteData","spriteImageUrl","fonts","res","length","push","JSON","parse","version","Error","spriteImage","spriteImgSize","img","Image","crossOrigin","onload","width","height","changed","src","ctx","document","createElement","getContext","measureCache","wrapText","text","font","em","key","wrappedText","measureText","words","split","line","lines","ii","word","join","allLayers","_deref2","layers","layersBySourceLayer","mapboxLayers","mapboxSource","layer","indexOf","id","sourceLayer","index","textHalo","_Stroke2","textColor","_Fill2","iconImageCache","styles","styleFunction","feature","resolution","properties","getProperties","zoom","_util","getZoomForResolution","type","types","getGeometry","getType","f","stylesLength","layerData","layerId","functionCache","filterCache","layout","emptyObj","paint","visibility","minzoom","maxzoom","filter","evaluateFilter","color","opacity","stroke","strokeColor","style","getValue","colorWithOpacity","getFill","getStroke","getText","_Style2","fill","setColor","setZIndex","setLineCap","defaults","setLineJoin","setMiterLimit","setWidth","setLineDash","undefined","map","x","hasImage","icon","iconImg","skipLabel","iconImage","fromTemplate","styleGeom","geom","getFlatMidpoint","extent","getExtent","Math","sqrt","max","pow","_Point2","getImage","setGeometry","iconSize","iconColor","icon_cache_key","spriteImageData","canvas","drawImage","y","data","getImageData","cc","putImageData","_Icon2","imgSize","scale","pixelRatio","size","offset","setRotation","deg2rad","setOpacity","setImage","setText","circleRadius","circleStrokeColor","circleColor","circleOpacity","circleStrokeWidth","_Circle2","radius","label","_Text2","textSize","_mapboxToCssFont2","chooseFont","textTransform","toUpperCase","toLowerCase","wrappedLabel","setFont","textAnchor","placement","setPlacement","textAlign","setTextAlign","textBaseline","setTextBaseline","textOffset","setOffsetX","setOffsetY","setFill","haloColor","setStroke","setStyle","set","functionTypes","line-miter-limit","fill-opacity","line-opacity","line-width","text-halo-width","text-max-width","text-offset","text-opacity","text-rotate","text-size","icon-opacity","icon-rotate","icon-size","icon-color","circle-radius","circle-opacity","circle-stroke-width","circle-color","circle-stroke-color","text-halo-color","text-color","line-color","fill-outline-color","fill-color","icon-image","line-cap","line-join","line-dasharray","symbol-placement","text-anchor","text-field","text-font","Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","layoutOrPaint","functions","_function2","function","_typeof","stops","fontMap","availableFonts","_feature_filter2","colorCache","colorData","templateRegEx","parts","match","fontWeights","thin","hairline","ultra-light","extra-light","light","book","regular","normal","plain","roman","standard","medium","semi-bold","demi-bold","bold","heavy","black","extra-bold","ultra-black","extra-black","ultra-bold","heavy-black","fat","poster","fontCache","cssData","maybeWeight","weight","w","pop","replace","fontFamily","colorSpaces","parseColor","extend","interpolate","identityFunction","coalesce","a","b","evaluateCategoricalFunction","parameters","propertySpec","input","hashedStops","keyType","evaluateIntervalFunction","findStopLessThanOrEqualTo","evaluateExponentialFunction","base","t","interpolationFactor","outputLower","outputUpper","interp","_len","arguments","args","Array","_key","evaluatedLower","apply","evaluatedUpper","evaluateIdentityFunction","values","lowerIndex","upperIndex","currentIndex","currentValue","upperValue","floor","isFunctionDefinition","lowerValue","difference","progress","createFunction","isColor","fun","zoomAndFeatureDependent","featureDependent","zoomDependent","stop","innerFun","categoricalKeyType","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","err","return","outputFunction","colorSpace","colorspace","stringify","forward","reverse","featureFunctions","zoomStops","featureFunctionStops","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","z","isFeatureConstant","isZoomConstant","ol","XYZ","VectorTile","Vector","TileJSON","Tile","Observable","format","MVT","GeoJSON","Map","tilegrid","proj","families","title","link","getNames","getLink","normalizeName","degrees","PI","candidate","zoomFactor","log","Function","compile","op","compileComparisonOp","compileLogicalOp","slice","compileNegation","compileInOp","compileHasOp","compilePropertyReference","checkType","left","right","expressions","sort","compare","expression","refProperties","deref","parent","result","k","forEach","ref","Circle","POINT","LINE","clamp","min","roundUpToPowerOfTwo","_asserts","ceil","LN2","squaredSegmentDistance","x1","y1","x2","y2","dx","dy","squaredDistance","solveLinearSystem","mat","maxRow","maxEl","abs","absValue","tmp","j","coef","toDegrees","angleInRadians","toRadians","angleInDegrees","modulo","lerp","cosh","exp","_index","AssertionError","code","path","this","message","asString","toString","asArray","isArray","fromString","normalize","_math","HEX_COLOR_RE_","NAMED_COLOR_RE_","cache","cacheSize","g","exec","el","body","appendChild","rgb","getComputedStyle","removeChild","fromNamed","hasAlpha","parseInt","substr","Number","fromStringInternal_","_color","Fill","opt_options","options","color_","checksum_","clone","getColor","getChecksum","CanvasPattern","CanvasGradient","Text","font_","rotation_","rotation","rotateWithView_","rotateWithView","scale_","text_","textAlign_","textBaseline_","fill_","maxAngle_","maxAngle","placement_","_TextPlacement2","overflow_","overflow","stroke_","offsetX_","offsetX","offsetY_","offsetY","backgroundFill_","backgroundFill","backgroundStroke_","backgroundStroke","padding_","padding","getFont","getPlacement","getMaxAngle","getOverflow","getRotation","getRotateWithView","getScale","getTextAlign","getTextBaseline","getOffsetX","getOffsetY","getBackgroundFill","getBackgroundStroke","getPadding","setOverflow","setMaxAngle","setScale","setBackgroundFill","setBackgroundStroke","setPadding","Icon","Stroke","Style","number","vec2","from","to","array","val","String","Boolean","output","inputs","kCSSColorTable","transparent","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","clamp_css_byte","round","clamp_css_float","parse_css_int","str","parseFloat","parse_css_float","css_hue_to_rgb","m1","m2","h","parseCSSColor","css_str","iv","ep","fname","params","alpha","e","parseColorString","rgba","Xn","Yn","Zn","t0","t1","t2","t3","rad2deg","xyz2lab","lab2xyz","xyz2rgb","rgb2xyz","rgbToLab","rgbColor","labToRgb","labColor","isNaN","lab","hcl","atan2","hclColor","cos","sin","applyStyle","applyBackground","some","setBackground","accessToken","baseUrl","host","_Map2","target","spriteRegEx","fetch","credentials","then","response","json","href","pathname","processStyle","catch","console","error","setTimeout","getLayer","getLayers","getArray","getSource","sourceId","_proj","_tilegrid","_Observable","defaultFont","preprocess","loadFont","googleFamilies","_google2","family","fontUrl","querySelector","markup","rel","getElementsByTagName","withPath","url","toSpriteUrl","extension","Promise","resolve","reject","sprite","sizeFactor","window","devicePixelRatio","spriteUrl","status","spritesJson","onChange","_stylefunction2","updateStyle","element","getTargetElement","getView","getZoom","bg","backgroundColor","backgroundOpacity","on","getSourceIdByRef","view","getCenter","setCenter","fromLonLat","center","setZoom","fit","getProjection","nearest","getSize","glLayer","glSource","glSourceId","mapid","tileGrid","glLayers","geoJsonFormat","_GeoJSON2","layerIds","finalizeLayer","addLayer","setVisible","once","sources","tiles","createXYZ","tileSize","maxZoom","minZoom","_VectorTile2","declutter","maxResolution","getMinZoom","getResolution","_VectorTile4","attributions","attribution","_MVT2","urls","visible","zIndex","tilejson","_TileJSON2","getState","tileJSONDoc","getTileJSON","tile","getTileGrid","setSource","getAttributions","getMaxZoom","setMaxResolution","unByKey","_XYZ2","setTileLoadFunction","bbox","getTileCoordExtent","getTileCoord","_Tile2","features","geoJsonUrl","readFeatures","featureProjection","_Vector2","_Vector4","_stylefunction","stylefunction"],"mappings":"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","file":"olms.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 42);\n","/**\n * @module ol/asserts\n */\nimport AssertionError from './AssertionError.js';\n\n/**\n * @param {*} assertion Assertion we expected to be truthy.\n * @param {number} errorCode Error code.\n */\nexport function assert(assertion, errorCode) {\n  if (!assertion) {\n    throw new AssertionError(errorCode);\n  }\n}\n","/**\n * @module ol\n */\n\n\n/**\n * OpenLayers version.\n * @type {string}\n */\nexport const VERSION = 'v4.6.4';\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * Usage:\n *\n *     function ParentClass(a, b) { }\n *     ParentClass.prototype.foo = function(a) { }\n *\n *     function ChildClass(a, b, c) {\n *       // Call parent constructor\n *       ParentClass.call(this, a, b);\n *     }\n *     inherits(ChildClass, ParentClass);\n *\n *     var child = new ChildClass('a', 'b', 'see');\n *     child.foo(); // This works.\n *\n * @param {!Function} childCtor Child constructor.\n * @param {!Function} parentCtor Parent constructor.\n * @function\n * @api\n */\nexport function inherits(childCtor, parentCtor) {\n  childCtor.prototype = Object.create(parentCtor.prototype);\n  childCtor.prototype.constructor = childCtor;\n}\n\n\n/**\n * Counter for getUid.\n * @type {number}\n * @private\n */\nlet uidCounter_ = 0;\n\n/**\n * Gets a unique ID for an object. This mutates the object so that further calls\n * with the same object as a parameter returns the same value. Unique IDs are generated\n * as a strictly increasing sequence. Adapted from goog.getUid.\n *\n * @param {Object} obj The object to get the unique ID for.\n * @return {number} The unique ID for the object.\n */\nexport function getUid(obj) {\n  return obj.ol_uid || (obj.ol_uid = ++uidCounter_);\n}\n","/*\nol-mapbox-style - Use Mapbox Style objects with OpenLayers\nCopyright 2016-present Boundless Spatial, Inc.\nLicense: https://raw.githubusercontent.com/boundlessgeo/ol-mapbox-gl-style/master/LICENSE\n*/\n\nimport Style from 'ol/style/Style';\nimport Fill from 'ol/style/Fill';\nimport Stroke from 'ol/style/Stroke';\nimport Icon from 'ol/style/Icon';\nimport Text from 'ol/style/Text';\nimport Circle from 'ol/style/Circle';\nimport Point from 'ol/geom/Point';\nimport derefLayers from '@mapbox/mapbox-gl-style-spec/deref';\nimport glfun from '@mapbox/mapbox-gl-style-spec/function';\nimport createFilter from '@mapbox/mapbox-gl-style-spec/feature_filter';\nimport mb2css from 'mapbox-to-css-font';\nimport {deg2rad, getZoomForResolution} from './util';\n\nconst functionTypes = {\n  'line-miter-limit': 'interpolated',\n  'fill-opacity': 'interpolated',\n  'line-opacity': 'interpolated',\n  'line-width': 'interpolated',\n  'text-halo-width': 'interpolated',\n  'text-max-width': 'interpolated',\n  'text-offset': 'interpolated',\n  'text-opacity': 'interpolated',\n  'text-rotate': 'interpolated',\n  'text-size': 'interpolated',\n  'icon-opacity': 'interpolated',\n  'icon-rotate': 'interpolated',\n  'icon-size': 'interpolated',\n  'icon-color': 'interpolated',\n  'circle-radius': 'interpolated',\n  'circle-opacity': 'interpolated',\n  'circle-stroke-width': 'interpolated',\n  'circle-color': 'interpolated',\n  'circle-stroke-color': 'interpolated',\n  'text-halo-color': 'interpolated',\n  'text-color': 'interpolated',\n  'line-color': 'interpolated',\n  'fill-outline-color': 'interpolated',\n  'fill-color': 'interpolated',\n  'icon-image': 'piecewise-constant',\n  'line-cap': 'piecewise-constant',\n  'line-join': 'piecewise-constant',\n  'line-dasharray': 'piecewise-constant',\n  'symbol-placement': 'piecewise-constant',\n  'text-anchor': 'piecewise-constant',\n  'text-field': 'piecewise-constant',\n  'text-font': 'piecewise-constant'\n};\n\nconst defaults = {\n  'fill-opacity': 1,\n  'line-cap': 'butt',\n  'line-join': 'miter',\n  'line-miter-limit': 2,\n  'line-opacity': 1,\n  'line-width': 1,\n  'symbol-placement': 'point',\n  'text-anchor': 'center',\n  'text-color': '#000000',\n  'text-font': ['Open Sans Regular', 'Arial Unicode MS Regular'],\n  'text-halo-color': 'rgba(0, 0, 0, 0)',\n  'text-halo-width': 0,\n  'text-max-width': 10,\n  'text-offset': [0, 0],\n  'text-opacity': 1,\n  'text-rotate': 0,\n  'text-size': 16,\n  'icon-opacity': 1,\n  'icon-rotate': 0,\n  'icon-size': 1,\n  'circle-color': '#000000',\n  'circle-stroke-color': '#000000',\n  'circle-opacity': 1,\n  'circle-stroke-width': 0\n};\n\nconst types = {\n  'Point': 1,\n  'MultiPoint': 1,\n  'LineString': 2,\n  'MultiLineString': 2,\n  'Polygon': 3,\n  'MultiPolygon': 3\n};\n\nconst functionCache = {};\nfunction getValue(layerId, layoutOrPaint, property, zoom, properties) {\n  if (!functionCache[layerId]) {\n    functionCache[layerId] = {};\n  }\n  const functions = functionCache[layerId];\n  if (!functions[property]) {\n    let value = layoutOrPaint[property];\n    if (value === undefined) {\n      value = defaults[property];\n    }\n    functions[property] = glfun(value, {\n      function: functionTypes[property],\n      type: property.indexOf('color') !== -1 ? 'color' :\n        typeof value == 'object' && value.stops && typeof value.stops[0][0] == 'number' ? 'number' : undefined\n    });\n  }\n  return functions[property](zoom, properties);\n}\n\nconst fontMap = {};\nfunction chooseFont(fonts, availableFonts) {\n  if (fontMap[fonts]) {\n    return fontMap[fonts];\n  }\n  if (availableFonts) {\n    for (let i = 0, ii = fonts.length; i < ii; ++i) {\n      const font = fonts[i];\n      if (availableFonts.indexOf(font) != -1) {\n        fontMap[fonts] = font;\n        break;\n      }\n    }\n    if (!fontMap[fonts]) {\n      // fallback font\n      fontMap[fonts] = fonts[fonts.length - 1];\n    }\n  } else {\n    fontMap[fonts] = fonts[0];\n  }\n  return fontMap[fonts];\n}\n\nconst filterCache = {};\nfunction evaluateFilter(layerId, filter, feature) {\n  if (!(layerId in filterCache)) {\n    filterCache[layerId] = createFilter(filter);\n  }\n  return filterCache[layerId](feature);\n}\n\nconst colorCache = {};\nfunction colorWithOpacity(color, opacity) {\n  if (color && opacity !== undefined) {\n    let colorData = colorCache[color];\n    if (!colorData) {\n      colorCache[color] = colorData = {\n        color: [\n          color[0] * 255 / color[3],\n          color[1] * 255 / color[3],\n          color[2] * 255 / color[3],\n          color[3]\n        ],\n        opacity: color[3]\n      };\n    }\n    color = colorData.color;\n    color[3] = colorData.opacity * opacity;\n    if (color[3] === 0) {\n      color = undefined;\n    }\n  }\n  return color;\n}\n\nconst templateRegEx = /^([^]*)\\{(.*)\\}([^]*)$/;\nfunction fromTemplate(text, properties) {\n  let parts;\n  do {\n    parts = text.match(templateRegEx);\n    if (parts) {\n      const value = properties[parts[2]] || '';\n      text = parts[1] + value + parts[3];\n    }\n  } while (parts);\n  return text;\n}\n\nconst emptyObj = {};\n\n/**\n * Creates a style function from the `glStyle` object for all layers that use\n * the specified `source`, which needs to be a `\"type\": \"vector\"` or\n * `\"type\": \"geojson\"` source and applies it to the specified OpenLayers layer.\n *\n * @param {ol.layer.Vector|ol.layer.VectorTile} olLayer OpenLayers layer to\n * apply the style to. In addition to the style, the layer will get two\n * properties: `mapbox-source` will be the `id` of the `glStyle`'s source used\n * for the layer, and `mapbox-layers` will be an array of the `id`s of the\n * `glStyle`'s layers.\n * @param {string|Object} glStyle Mapbox Style object.\n * @param {string|Array<string>} source `source` key or an array of layer `id`s\n * from the Mapbox Style object. When a `source` key is provided, all layers for\n * the specified source will be included in the style function. When layer `id`s\n * are provided, they must be from layers that use the same source.\n * @param {Array<number>} [resolutions=[78271.51696402048, 39135.75848201024,\n * 19567.87924100512, 9783.93962050256, 4891.96981025128, 2445.98490512564,\n * 1222.99245256282, 611.49622628141, 305.748113140705, 152.8740565703525,\n * 76.43702828517625, 38.21851414258813, 19.109257071294063, 9.554628535647032,\n * 4.777314267823516, 2.388657133911758, 1.194328566955879, 0.5971642834779395,\n * 0.29858214173896974, 0.14929107086948487, 0.07464553543474244]]\n * Resolutions for mapping resolution to zoom level.\n * @param {Object} [spriteData=undefined] Sprite data from the url specified in\n * the Mapbox Style object's `sprite` property. Only required if a `sprite`\n * property is specified in the Mapbox Style object.\n * @param {Object} [spriteImageUrl=undefined] Sprite image url for the sprite\n * specified in the Mapbox Style object's `sprite` property. Only required if a\n * `sprite` property is specified in the Mapbox Style object.\n * @param {Array<string>} [fonts=undefined] Array of available fonts, using the\n * same font names as the Mapbox Style object. If not provided, the style\n * function will always use the first font from the font array.\n * @return {ol.style.StyleFunction} Style function for use in\n * `ol.layer.Vector` or `ol.layer.VectorTile`.\n */\nexport default function(olLayer, glStyle, source, resolutions, spriteData, spriteImageUrl, fonts) {\n  if (!resolutions) {\n    resolutions = [];\n    for (let res = 78271.51696402048; resolutions.length < 21; res /= 2) {\n      resolutions.push(res);\n    }\n  }\n  if (typeof glStyle == 'string') {\n    glStyle = JSON.parse(glStyle);\n  }\n  if (glStyle.version != 8) {\n    throw new Error('glStyle version 8 required.');\n  }\n\n  let spriteImage, spriteImgSize;\n  if (spriteImageUrl) {\n    const img = new Image();\n    img.crossOrigin = 'anonymous';\n    img.onload = function() {\n      spriteImage = img;\n      spriteImgSize = [img.width, img.height];\n      olLayer.changed();\n    };\n    img.src = spriteImageUrl;\n  }\n\n  const ctx = document.createElement('CANVAS').getContext('2d');\n  const measureCache = {};\n  function wrapText(text, font, em) {\n    const key = em + ',' + font + ',' + text;\n    let wrappedText = measureCache[key];\n    if (!wrappedText) {\n      ctx.font = font;\n      const oneEm = ctx.measureText('M').width;\n      const width = oneEm * em;\n      const words = text.split(' ');\n      let line = '';\n      const lines = [];\n      for (let i = 0, ii = words.length; i < ii; ++i) {\n        const word = words[i];\n        if ((ctx.measureText(line + word).width <= width)) {\n          line += (line ? ' ' : '') + word;\n        } else {\n          if (line) {\n            lines.push(line);\n          }\n          line = word;\n        }\n      }\n      if (line) {\n        lines.push(line);\n      }\n      measureCache[key] = wrappedText = lines.join('\\n');\n    }\n    return wrappedText;\n  }\n\n  const allLayers = derefLayers(glStyle.layers);\n\n  const layersBySourceLayer = {};\n  const mapboxLayers = [];\n  let mapboxSource;\n  for (let i = 0, ii = allLayers.length; i < ii; ++i) {\n    const layer = allLayers[i];\n    if (typeof source == 'string' && layer.source == source ||\n        source.indexOf(layer.id) !== -1) {\n      const sourceLayer = layer['source-layer'];\n      if (!mapboxSource) {\n        mapboxSource = layer.source;\n      }\n      let layers = layersBySourceLayer[sourceLayer];\n      if (!layers) {\n        layers = layersBySourceLayer[sourceLayer] = [];\n      }\n      layers.push({\n        layer: layer,\n        index: i\n      });\n      mapboxLayers.push(layer.id);\n    }\n  }\n\n  const textHalo = new Stroke();\n  const textColor = new Fill();\n\n  const iconImageCache = {};\n\n  const styles = [];\n\n  const styleFunction = function(feature, resolution) {\n    const properties = feature.getProperties();\n    const layers = layersBySourceLayer[properties.layer];\n    if (!layers) {\n      return;\n    }\n    let zoom = resolutions.indexOf(resolution);\n    if (zoom == -1) {\n      zoom = getZoomForResolution(resolution, resolutions);\n    }\n    const type = types[feature.getGeometry().getType()];\n    const f = {\n      properties: properties,\n      type: type\n    };\n    let stylesLength = -1;\n    for (let i = 0, ii = layers.length; i < ii; ++i) {\n      const layerData = layers[i];\n      const layer = layerData.layer;\n      const layerId = layer.id;\n      // TODO revisit when diffing gets added\n      delete functionCache[layerId];\n      delete filterCache[layerId];\n\n      const layout = layer.layout || emptyObj;\n      const paint = layer.paint || emptyObj;\n      if (layout.visibility === 'none' || ('minzoom' in layer && zoom < layer.minzoom) ||\n          ('maxzoom' in layer && zoom >= layer.maxzoom)) {\n        continue;\n      }\n      const filter = layer.filter;\n      if (!filter || evaluateFilter(layerId, filter, f)) {\n        let color, opacity, fill, stroke, strokeColor, style;\n        const index = layerData.index;\n        if (type == 3) {\n          if (!('fill-pattern' in paint) && 'fill-color' in paint) {\n            opacity = getValue(layerId, paint, 'fill-opacity', zoom, properties);\n            color = colorWithOpacity(getValue(layerId, paint, 'fill-color', zoom, properties), opacity);\n            if (color) {\n              ++stylesLength;\n              style = styles[stylesLength];\n              if (!style || !style.getFill() || style.getStroke() || style.getText()) {\n                style = styles[stylesLength] = new Style({\n                  fill: new Fill()\n                });\n              }\n              fill = style.getFill();\n              fill.setColor(color);\n              style.setZIndex(index);\n            }\n            if ('fill-outline-color' in paint) {\n              strokeColor = colorWithOpacity(getValue(layerId, paint, 'fill-outline-color', zoom, properties), opacity);\n            }\n            if (strokeColor) {\n              ++stylesLength;\n              style = styles[stylesLength];\n              if (!style || !style.getStroke() || style.getFill() || style.getText()) {\n                style = styles[stylesLength] = new Style({\n                  stroke: new Stroke()\n                });\n              }\n              stroke = style.getStroke();\n              stroke.setLineCap(defaults['line-cap']);\n              stroke.setLineJoin(defaults['line-join']);\n              stroke.setMiterLimit(defaults['line-miter-limit']);\n              stroke.setColor(strokeColor);\n              stroke.setWidth(1);\n              stroke.setLineDash(null);\n              style.setZIndex(index);\n            }\n          }\n        }\n        if (type != 1) {\n          color = !('line-pattern' in paint) && 'line-color' in paint ?\n            colorWithOpacity(getValue(layerId, paint, 'line-color', zoom, properties), getValue(layerId, paint, 'line-opacity', zoom, properties)) :\n            undefined;\n          const width = getValue(layerId, paint, 'line-width', zoom, properties);\n          if (color && width > 0) {\n            ++stylesLength;\n            style = styles[stylesLength];\n            if (!style || !style.getStroke() || style.getFill() || style.getText()) {\n              style = styles[stylesLength] = new Style({\n                stroke: new Stroke()\n              });\n            }\n            stroke = style.getStroke();\n            stroke.setLineCap(getValue(layerId, layout, 'line-cap', zoom, properties));\n            stroke.setLineJoin(getValue(layerId, layout, 'line-join', zoom, properties));\n            stroke.setMiterLimit(getValue(layerId, layout, 'line-miter-limit', zoom, properties));\n            stroke.setColor(color);\n            stroke.setWidth(width);\n            stroke.setLineDash(paint['line-dasharray'] ?\n              getValue(layerId, paint, 'line-dasharray', zoom, properties).map(function(x) {\n                return x * width;\n              }) : null);\n            style.setZIndex(index);\n          }\n        }\n\n        let hasImage = false;\n        let text = null;\n        let icon, iconImg, skipLabel;\n        if ((type == 1 || type == 2) && 'icon-image' in layout) {\n          const iconImage = getValue(layerId, layout, 'icon-image', zoom, properties);\n          if (iconImage) {\n            icon = fromTemplate(iconImage, properties);\n            let styleGeom = undefined;\n            if (spriteImage && spriteData && spriteData[icon]) {\n              if (type == 2) {\n                const geom = feature.getGeometry();\n                // ol package and ol-debug.js only\n                if (geom.getFlatMidpoint) {\n                  const extent = geom.getExtent();\n                  const size = Math.sqrt(Math.max(\n                    Math.pow((extent[2] - extent[0]) / resolution, 2),\n                    Math.pow((extent[3] - extent[1]) / resolution, 2))\n                  );\n                  if (size > 150) {\n                    //FIXME Do not hard-code a size of 150\n                    styleGeom = new Point(geom.getFlatMidpoint());\n                  }\n                }\n              }\n              if (type !== 2 || styleGeom) {\n                ++stylesLength;\n                style = styles[stylesLength];\n                if (!style || !style.getImage() || style.getFill() || style.getStroke()) {\n                  style = styles[stylesLength] = new Style();\n                }\n                style.setGeometry(styleGeom);\n                const iconSize = getValue(layerId, layout, 'icon-size', zoom, properties);\n                const iconColor = paint['icon-color'] !== undefined ? getValue(layerId, paint, 'icon-color', zoom, properties) : null;\n                let icon_cache_key = icon + '.' + iconSize;\n                if (iconColor !== null) {\n                  icon_cache_key += '.' + iconColor;\n                }\n                iconImg = iconImageCache[icon_cache_key];\n                if (!iconImg) {\n                  const spriteImageData = spriteData[icon];\n                  if (iconColor !== null) {\n                    // cut out the sprite and color it\n                    color = colorWithOpacity(iconColor, 1);\n                    const canvas = document.createElement('canvas');\n                    canvas.width = spriteImageData.width;\n                    canvas.height = spriteImageData.height;\n                    const ctx = canvas.getContext('2d');\n                    ctx.drawImage(\n                      spriteImage,\n                      spriteImageData.x,\n                      spriteImageData.y,\n                      spriteImageData.width,\n                      spriteImageData.height,\n                      0,\n                      0,\n                      spriteImageData.width,\n                      spriteImageData.height\n                    );\n                    const data = ctx.getImageData(0, 0, canvas.width, canvas.height);\n                    for (let c = 0, cc = data.data.length; c < cc; c += 4) {\n                      data.data[c] = color[0];\n                      data.data[c + 1] = color[1];\n                      data.data[c + 2] = color[2];\n                    }\n                    ctx.putImageData(data, 0, 0);\n                    iconImg = iconImageCache[icon_cache_key] = new Icon({\n                      img: canvas,\n                      imgSize: [canvas.width, canvas.height],\n                      scale: iconSize / spriteImageData.pixelRatio\n                    });\n                  } else {\n                    iconImg = iconImageCache[icon_cache_key] = new Icon({\n                      img: spriteImage,\n                      imgSize: spriteImgSize,\n                      size: [spriteImageData.width, spriteImageData.height],\n                      offset: [spriteImageData.x, spriteImageData.y],\n                      scale: iconSize / spriteImageData.pixelRatio\n                    });\n                  }\n                }\n                iconImg.setRotation(deg2rad(getValue(layerId, layout, 'icon-rotate', zoom, properties)));\n                iconImg.setOpacity(getValue(layerId, paint, 'icon-opacity', zoom, properties));\n                style.setImage(iconImg);\n                text = style.getText();\n                style.setText(undefined);\n                style.setZIndex(99999 - index);\n                hasImage = true;\n                skipLabel = false;\n              } else {\n                skipLabel = true;\n              }\n            }\n          }\n        }\n\n        if (type == 1 && 'circle-radius' in paint) {\n          ++stylesLength;\n          style = styles[stylesLength];\n          if (!style || !style.getImage() || style.getFill() || style.getStroke()) {\n            style = styles[stylesLength] = new Style();\n          }\n          const circleRadius = getValue(layerId, paint, 'circle-radius', zoom, properties);\n          const circleStrokeColor = getValue(layerId, paint, 'circle-stroke-color', zoom, properties);\n          const circleColor = getValue(layerId, paint, 'circle-color', zoom, properties);\n          const circleOpacity = getValue(layerId, paint, 'circle-opacity', zoom, properties);\n          const circleStrokeWidth = getValue(layerId, paint, 'circle-stroke-width', zoom, properties);\n          const cache_key = circleRadius + '.' + circleStrokeColor + '.' +\n            circleColor + '.' + circleOpacity + '.' + circleStrokeWidth;\n          iconImg = iconImageCache[cache_key];\n          if (!iconImg) {\n            iconImg = new Circle({\n              radius: circleRadius,\n              stroke: circleStrokeWidth === 0 ? undefined : new Stroke({\n                width: circleStrokeWidth,\n                color: colorWithOpacity(circleStrokeColor, circleOpacity)\n              }),\n              fill: new Fill({\n                color: colorWithOpacity(circleColor, circleOpacity)\n              })\n            });\n          }\n          style.setImage(iconImg);\n          text = style.getText();\n          style.setText(undefined);\n          style.setGeometry(undefined);\n          style.setZIndex(99999 - index);\n          hasImage = true;\n        }\n\n        let label;\n        if ('text-field' in layout) {\n          const textField = getValue(layerId, layout, 'text-field', zoom, properties);\n          label = fromTemplate(textField, properties);\n        }\n        if (label && !skipLabel) {\n          if (!hasImage) {\n            ++stylesLength;\n            style = styles[stylesLength];\n            if (!style || !style.getText() || style.getFill() || style.getStroke()) {\n              style = styles[stylesLength] = new Style();\n            }\n            style.setImage(undefined);\n            style.setGeometry(undefined);\n          }\n          if (!style.getText()) {\n            style.setText(text || new Text());\n          }\n          text = style.getText();\n          const textSize = getValue(layerId, layout, 'text-size', zoom, properties);\n          const font = mb2css(chooseFont(getValue(layerId, layout, 'text-font', zoom, properties)), textSize);\n          const textTransform = layout['text-transform'];\n          if (textTransform == 'uppercase') {\n            label = label.toUpperCase();\n          } else if (textTransform == 'lowercase') {\n            label = label.toLowerCase();\n          }\n          const wrappedLabel = type == 2 ? label : wrapText(label, font, getValue(layerId, layout, 'text-max-width', zoom, properties));\n          text.setText(wrappedLabel);\n          text.setFont(font);\n          text.setRotation(deg2rad(getValue(layerId, layout, 'text-rotate', zoom, properties)));\n          const textAnchor = getValue(layerId, layout, 'text-anchor', zoom, properties);\n          const placement = (hasImage || type == 1) ? 'point' : getValue(layerId, layout, 'symbol-placement', zoom, properties);\n          text.setPlacement(placement);\n          if (placement == 'point') {\n            let textAlign = 'center';\n            if (textAnchor.indexOf('left') !== -1) {\n              textAlign = 'left';\n            } else if (textAnchor.indexOf('right') !== -1) {\n              textAlign = 'right';\n            }\n            text.setTextAlign(textAlign);\n          } else {\n            text.setTextAlign();\n          }\n          let textBaseline = 'middle';\n          if (textAnchor.indexOf('bottom') == 0) {\n            textBaseline = 'bottom';\n          } else if (textAnchor.indexOf('top') == 0) {\n            textBaseline = 'top';\n          }\n          text.setTextBaseline(textBaseline);\n          const textOffset = getValue(layerId, layout, 'text-offset', zoom, properties);\n          text.setOffsetX(textOffset[0] * textSize);\n          text.setOffsetY(textOffset[1] * textSize);\n          opacity = getValue(layerId, paint, 'text-opacity', zoom, properties);\n          textColor.setColor(colorWithOpacity(getValue(layerId, paint, 'text-color', zoom, properties), opacity));\n          text.setFill(textColor);\n          const haloColor = colorWithOpacity(getValue(layerId, paint, 'text-halo-color', zoom, properties), opacity);\n          if (haloColor) {\n            textHalo.setColor(haloColor);\n            textHalo.setWidth(getValue(layerId, paint, 'text-halo-width', zoom, properties));\n            text.setStroke(textHalo);\n          } else {\n            text.setStroke(undefined);\n          }\n          style.setZIndex(99999 - index);\n        }\n      }\n    }\n\n    if (stylesLength > -1) {\n      styles.length = stylesLength + 1;\n      return styles;\n    }\n  };\n\n  olLayer.setStyle(styleFunction);\n  olLayer.set('mapbox-source', mapboxSource);\n  olLayer.set('mapbox-layers', mapboxLayers);\n  return styleFunction;\n}\n","var fontWeights = {\n  thin: 100,\n  hairline: 100,\n  'ultra-light': 100,\n  'extra-light': 100,\n  light: 200,\n  book: 300,\n  regular: 400,\n  normal: 400,\n  plain: 400,\n  roman: 400,\n  standard: 400,\n  medium: 500,\n  'semi-bold': 600,\n  'demi-bold': 600,\n  bold: 700,\n  heavy: 800,\n  black: 800,\n  'extra-bold': 800,\n  'ultra-black': 900,\n  'extra-black': 900,\n  'ultra-bold': 900,\n  'heavy-black': 900,\n  fat: 900,\n  poster: 900\n};\nvar sp = ' ';\n\nvar fontCache = {};\n\nmodule.exports = function(font, size) {\n  var cssData = fontCache[font];\n  if (!cssData) {\n    var parts = font.split(' ');\n    var maybeWeight = parts[parts.length - 1].toLowerCase();\n    var weight = 'normal';\n    var style = 'normal';\n    if (maybeWeight == 'normal' || maybeWeight == 'italic' || maybeWeight == 'oblique') {\n      style = maybeWeight;\n      parts.pop();\n      maybeWeight = parts[parts.length - 1].toLowerCase();\n    }\n    for (var w in fontWeights) {\n      if (maybeWeight == w || maybeWeight == w.replace('-', '') || maybeWeight == w.replace('-', ' ')) {\n        weight = fontWeights[w];\n        parts.pop();\n        break;\n      }\n    }\n    if (typeof maybeWeight == 'number') {\n      weight = maybeWeight;\n    }\n    var fontFamily = parts.join(' ')\n        .replace('Klokantech Noto Sans', 'Noto Sans');\n    if (fontFamily.indexOf(' ') !== -1) {\n      fontFamily = '\"' + fontFamily + '\"';\n    }\n    // CSS font property: font-style font-weight font-size font-family\n    cssData = fontCache[font] = [style, weight, fontFamily];\n  }\n  return cssData[0] + sp + cssData[1] + sp + size + 'px' + sp + cssData[2];\n}\n","\nconst colorSpaces = require('./color_spaces');\nconst parseColor = require('../util/parse_color');\nconst extend = require('../util/extend');\nconst getType = require('../util/get_type');\nconst interpolate = require('../util/interpolate');\n\nfunction identityFunction(x) {\n    return x;\n}\n\nfunction createFunction(parameters, propertySpec) {\n    const isColor = propertySpec.type === 'color';\n\n    let fun;\n\n    if (!isFunctionDefinition(parameters)) {\n        if (isColor && parameters) {\n            parameters = parseColor(parameters);\n        }\n        fun = function() {\n            return parameters;\n        };\n        fun.isFeatureConstant = true;\n        fun.isZoomConstant = true;\n\n    } else {\n        const zoomAndFeatureDependent = parameters.stops && typeof parameters.stops[0][0] === 'object';\n        const featureDependent = zoomAndFeatureDependent || parameters.property !== undefined;\n        const zoomDependent = zoomAndFeatureDependent || !featureDependent;\n        const type = parameters.type || (propertySpec.function === 'interpolated' ? 'exponential' : 'interval');\n\n        if (isColor) {\n            parameters = extend({}, parameters);\n\n            if (parameters.stops) {\n                parameters.stops = parameters.stops.map((stop) => {\n                    return [stop[0], parseColor(stop[1])];\n                });\n            }\n\n            if (parameters.default) {\n                parameters.default = parseColor(parameters.default);\n            } else {\n                parameters.default = parseColor(propertySpec.default);\n            }\n        }\n\n        let innerFun;\n        let hashedStops;\n        let categoricalKeyType;\n        if (type === 'exponential') {\n            innerFun = evaluateExponentialFunction;\n        } else if (type === 'interval') {\n            innerFun = evaluateIntervalFunction;\n        } else if (type === 'categorical') {\n            innerFun = evaluateCategoricalFunction;\n\n            // For categorical functions, generate an Object as a hashmap of the stops for fast searching\n            hashedStops = Object.create(null);\n            for (const stop of parameters.stops) {\n                hashedStops[stop[0]] = stop[1];\n            }\n\n            // Infer key type based on first stop key-- used to encforce strict type checking later\n            categoricalKeyType = typeof parameters.stops[0][0];\n\n        } else if (type === 'identity') {\n            innerFun = evaluateIdentityFunction;\n        } else {\n            throw new Error(`Unknown function type \"${type}\"`);\n        }\n\n        let outputFunction;\n\n        // If we're interpolating colors in a color system other than RGBA,\n        // first translate all stop values to that color system, then interpolate\n        // arrays as usual. The `outputFunction` option lets us then translate\n        // the result of that interpolation back into RGBA.\n        if (parameters.colorSpace && parameters.colorSpace !== 'rgb') {\n            if (colorSpaces[parameters.colorSpace]) {\n                const colorspace = colorSpaces[parameters.colorSpace];\n                // Avoid mutating the parameters value\n                parameters = JSON.parse(JSON.stringify(parameters));\n                for (let s = 0; s < parameters.stops.length; s++) {\n                    parameters.stops[s] = [\n                        parameters.stops[s][0],\n                        colorspace.forward(parameters.stops[s][1])\n                    ];\n                }\n                outputFunction = colorspace.reverse;\n            } else {\n                throw new Error(`Unknown color space: ${parameters.colorSpace}`);\n            }\n        } else {\n            outputFunction = identityFunction;\n        }\n\n        if (zoomAndFeatureDependent) {\n            const featureFunctions = {};\n            const zoomStops = [];\n            for (let s = 0; s < parameters.stops.length; s++) {\n                const stop = parameters.stops[s];\n                const zoom = stop[0].zoom;\n                if (featureFunctions[zoom] === undefined) {\n                    featureFunctions[zoom] = {\n                        zoom: zoom,\n                        type: parameters.type,\n                        property: parameters.property,\n                        default: parameters.default,\n                        stops: []\n                    };\n                    zoomStops.push(zoom);\n                }\n                featureFunctions[zoom].stops.push([stop[0].value, stop[1]]);\n            }\n\n            const featureFunctionStops = [];\n            for (const z of zoomStops) {\n                featureFunctionStops.push([featureFunctions[z].zoom, createFunction(featureFunctions[z], propertySpec)]);\n            }\n            fun = function(zoom, feature) {\n                return outputFunction(evaluateExponentialFunction({\n                    stops: featureFunctionStops,\n                    base: parameters.base\n                }, propertySpec, zoom)(zoom, feature));\n            };\n            fun.isFeatureConstant = false;\n            fun.isZoomConstant = false;\n\n        } else if (zoomDependent) {\n            fun = function(zoom) {\n                return outputFunction(innerFun(parameters, propertySpec, zoom, hashedStops, categoricalKeyType));\n            };\n            fun.isFeatureConstant = true;\n            fun.isZoomConstant = false;\n        } else {\n            fun = function(zoom, feature) {\n                const value = feature[parameters.property];\n                if (value === undefined) {\n                    return coalesce(parameters.default, propertySpec.default);\n                }\n                return outputFunction(innerFun(parameters, propertySpec, value, hashedStops, categoricalKeyType));\n            };\n            fun.isFeatureConstant = false;\n            fun.isZoomConstant = true;\n        }\n    }\n\n    return fun;\n}\n\nfunction coalesce(a, b, c) {\n    if (a !== undefined) return a;\n    if (b !== undefined) return b;\n    if (c !== undefined) return c;\n}\n\nfunction evaluateCategoricalFunction(parameters, propertySpec, input, hashedStops, keyType) {\n    const evaluated = typeof input === keyType ? hashedStops[input] : undefined; // Enforce strict typing on input\n    return coalesce(evaluated, parameters.default, propertySpec.default);\n}\n\nfunction evaluateIntervalFunction(parameters, propertySpec, input) {\n    // Edge cases\n    if (getType(input) !== 'number') return coalesce(parameters.default, propertySpec.default);\n    const n = parameters.stops.length;\n    if (n === 1) return parameters.stops[0][1];\n    if (input <= parameters.stops[0][0]) return parameters.stops[0][1];\n    if (input >= parameters.stops[n - 1][0]) return parameters.stops[n - 1][1];\n\n    const index = findStopLessThanOrEqualTo(parameters.stops, input);\n\n    return parameters.stops[index][1];\n}\n\nfunction evaluateExponentialFunction(parameters, propertySpec, input) {\n    const base = parameters.base !== undefined ? parameters.base : 1;\n\n    // Edge cases\n    if (getType(input) !== 'number') return coalesce(parameters.default, propertySpec.default);\n    const n = parameters.stops.length;\n    if (n === 1) return parameters.stops[0][1];\n    if (input <= parameters.stops[0][0]) return parameters.stops[0][1];\n    if (input >= parameters.stops[n - 1][0]) return parameters.stops[n - 1][1];\n\n    const index = findStopLessThanOrEqualTo(parameters.stops, input);\n    const t = interpolationFactor(\n        input, base,\n        parameters.stops[index][0],\n        parameters.stops[index + 1][0]);\n\n    const outputLower = parameters.stops[index][1];\n    const outputUpper = parameters.stops[index + 1][1];\n    const interp = interpolate[propertySpec.type] || identityFunction;\n\n    if (typeof outputLower === 'function') {\n        return function(...args) {\n            const evaluatedLower = outputLower.apply(undefined, args);\n            const evaluatedUpper = outputUpper.apply(undefined, args);\n            // Special case for fill-outline-color, which has no spec default.\n            if (evaluatedLower === undefined || evaluatedUpper === undefined) {\n                return undefined;\n            }\n            return interp(evaluatedLower, evaluatedUpper, t);\n        };\n    }\n\n    return interp(outputLower, outputUpper, t);\n}\n\nfunction evaluateIdentityFunction(parameters, propertySpec, input) {\n    if (propertySpec.type === 'color') {\n        input = parseColor(input);\n    } else if (getType(input) !== propertySpec.type && (propertySpec.type !== 'enum' || !propertySpec.values[input])) {\n        input = undefined;\n    }\n    return coalesce(input, parameters.default, propertySpec.default);\n}\n\n/**\n * Returns the index of the last stop <= input, or 0 if it doesn't exist.\n *\n * @private\n */\nfunction findStopLessThanOrEqualTo(stops, input) {\n    const n = stops.length;\n    let lowerIndex = 0;\n    let upperIndex = n - 1;\n    let currentIndex = 0;\n    let currentValue, upperValue;\n\n    while (lowerIndex <= upperIndex) {\n        currentIndex = Math.floor((lowerIndex + upperIndex) / 2);\n        currentValue = stops[currentIndex][0];\n        upperValue = stops[currentIndex + 1][0];\n        if (input === currentValue || input > currentValue && input < upperValue) { // Search complete\n            return currentIndex;\n        } else if (currentValue < input) {\n            lowerIndex = currentIndex + 1;\n        } else if (currentValue > input) {\n            upperIndex = currentIndex - 1;\n        }\n    }\n\n    return Math.max(currentIndex - 1, 0);\n}\n\nfunction isFunctionDefinition(value) {\n    return typeof value === 'object' && (value.stops || value.type === 'identity');\n}\n\n/**\n * Returns a ratio that can be used to interpolate between exponential function\n * stops.\n *\n * How it works:\n * Two consecutive stop values define a (scaled and shifted) exponential\n * function `f(x) = a * base^x + b`, where `base` is the user-specified base,\n * and `a` and `b` are constants affording sufficient degrees of freedom to fit\n * the function to the given stops.\n *\n * Here's a bit of algebra that lets us compute `f(x)` directly from the stop\n * values without explicitly solving for `a` and `b`:\n *\n * First stop value: `f(x0) = y0 = a * base^x0 + b`\n * Second stop value: `f(x1) = y1 = a * base^x1 + b`\n * => `y1 - y0 = a(base^x1 - base^x0)`\n * => `a = (y1 - y0)/(base^x1 - base^x0)`\n *\n * Desired value: `f(x) = y = a * base^x + b`\n * => `f(x) = y0 + a * (base^x - base^x0)`\n *\n * From the above, we can replace the `a` in `a * (base^x - base^x0)` and do a\n * little algebra:\n * ```\n * a * (base^x - base^x0) = (y1 - y0)/(base^x1 - base^x0) * (base^x - base^x0)\n *                     = (y1 - y0) * (base^x - base^x0) / (base^x1 - base^x0)\n * ```\n *\n * If we let `(base^x - base^x0) / (base^x1 base^x0)`, then we have\n * `f(x) = y0 + (y1 - y0) * ratio`.  In other words, `ratio` may be treated as\n * an interpolation factor between the two stops' output values.\n *\n * (Note: a slightly different form for `ratio`,\n * `(base^(x-x0) - 1) / (base^(x1-x0) - 1) `, is equivalent, but requires fewer\n * expensive `Math.pow()` operations.)\n *\n * @private\n*/\nfunction interpolationFactor(input, base, lowerValue, upperValue) {\n    const difference = upperValue - lowerValue;\n    const progress = input - lowerValue;\n\n    if (difference === 0) {\n        return 0;\n    } else if (base === 1) {\n        return progress / difference;\n    } else {\n        return (Math.pow(base, progress) - 1) / (Math.pow(base, difference) - 1);\n    }\n}\n\nmodule.exports = createFunction;\nmodule.exports.isFunctionDefinition = isFunctionDefinition;\nmodule.exports.interpolationFactor = interpolationFactor;\nmodule.exports.findStopLessThanOrEqualTo = findStopLessThanOrEqualTo;\n","module.exports = ol.source.XYZ;","module.exports = ol.source.VectorTile;","module.exports = ol.source.Vector;","module.exports = ol.source.TileJSON;","module.exports = ol.layer.VectorTile;","module.exports = ol.layer.Vector;","module.exports = ol.layer.Tile;","module.exports = ol.Observable;","module.exports = ol.format.MVT;","module.exports = ol.format.GeoJSON;","module.exports = ol.Map;","module.exports = ol.tilegrid;","module.exports = ol.proj;","// Generated by CoffeeScript 1.10.0\n(function() {\n  var families;\n\n  module.exports = {\n    icon: 'icons/google.svg',\n    name: 'google',\n    title: 'Google Fonts',\n    link: 'google.com/fonts',\n    getNames: function() {\n      return families;\n    },\n    getLink: function(name) {\n      return \"https://fonts.google.com/specimen/\" + (name.replace(/( )/g, '+'));\n    },\n    normalizeName: function(name) {\n      return name;\n    }\n  };\n\n  families = [\"ABeeZee\", \"Abel\", \"Abril Fatface\", \"Aclonica\", \"Acme\", \"Actor\", \"Adamina\", \"Advent Pro\", \"Aguafina Script\", \"Akronim\", \"Aladin\", \"Aldrich\", \"Alef\", \"Alegreya\", \"Alegreya SC\", \"Alegreya Sans\", \"Alegreya Sans SC\", \"Alex Brush\", \"Alfa Slab One\", \"Alice\", \"Alike\", \"Alike Angular\", \"Allan\", \"Allerta\", \"Allerta Stencil\", \"Allura\", \"Almendra\", \"Almendra Display\", \"Almendra SC\", \"Amarante\", \"Amaranth\", \"Amatic SC\", \"Amethysta\", \"Amiri\", \"Amita\", \"Anaheim\", \"Andada\", \"Andika\", \"Angkor\", \"Annie Use Your Telescope\", \"Anonymous Pro\", \"Antic\", \"Antic Didone\", \"Antic Slab\", \"Anton\", \"Arapey\", \"Arbutus\", \"Arbutus Slab\", \"Architects Daughter\", \"Archivo Black\", \"Archivo Narrow\", \"Arimo\", \"Arizonia\", \"Armata\", \"Artifika\", \"Arvo\", \"Arya\", \"Asap\", \"Asar\", \"Asset\", \"Astloch\", \"Asul\", \"Atomic Age\", \"Aubrey\", \"Audiowide\", \"Autour One\", \"Average\", \"Average Sans\", \"Averia Gruesa Libre\", \"Averia Libre\", \"Averia Sans Libre\", \"Averia Serif Libre\", \"Bad Script\", \"Balthazar\", \"Bangers\", \"Basic\", \"Battambang\", \"Baumans\", \"Bayon\", \"Belgrano\", \"Belleza\", \"BenchNine\", \"Bentham\", \"Berkshire Swash\", \"Bevan\", \"Bigelow Rules\", \"Bigshot One\", \"Bilbo\", \"Bilbo Swash Caps\", \"Biryani\", \"Bitter\", \"Black Ops One\", \"Bokor\", \"Bonbon\", \"Boogaloo\", \"Bowlby One\", \"Bowlby One SC\", \"Brawler\", \"Bree Serif\", \"Bubblegum Sans\", \"Bubbler One\", \"Buda\", \"Buenard\", \"Butcherman\", \"Butterfly Kids\", \"Cabin\", \"Cabin Condensed\", \"Cabin Sketch\", \"Caesar Dressing\", \"Cagliostro\", \"Calligraffitti\", \"Cambay\", \"Cambo\", \"Candal\", \"Cantarell\", \"Cantata One\", \"Cantora One\", \"Capriola\", \"Cardo\", \"Carme\", \"Carrois Gothic\", \"Carrois Gothic SC\", \"Carter One\", \"Catamaran\", \"Caudex\", \"Caveat\", \"Caveat Brush\", \"Cedarville Cursive\", \"Ceviche One\", \"Changa One\", \"Chango\", \"Chau Philomene One\", \"Chela One\", \"Chelsea Market\", \"Chenla\", \"Cherry Cream Soda\", \"Cherry Swash\", \"Chewy\", \"Chicle\", \"Chivo\", \"Chonburi\", \"Cinzel\", \"Cinzel Decorative\", \"Clicker Script\", \"Coda\", \"Coda Caption\", \"Codystar\", \"Combo\", \"Comfortaa\", \"Coming Soon\", \"Concert One\", \"Condiment\", \"Content\", \"Contrail One\", \"Convergence\", \"Cookie\", \"Copse\", \"Corben\", \"Courgette\", \"Cousine\", \"Coustard\", \"Covered By Your Grace\", \"Crafty Girls\", \"Creepster\", \"Crete Round\", \"Crimson Text\", \"Croissant One\", \"Crushed\", \"Cuprum\", \"Cutive\", \"Cutive Mono\", \"Damion\", \"Dancing Script\", \"Dangrek\", \"Dawning of a New Day\", \"Days One\", \"Dekko\", \"Delius\", \"Delius Swash Caps\", \"Delius Unicase\", \"Della Respira\", \"Denk One\", \"Devonshire\", \"Dhurjati\", \"Didact Gothic\", \"Diplomata\", \"Diplomata SC\", \"Domine\", \"Donegal One\", \"Doppio One\", \"Dorsa\", \"Dosis\", \"Dr Sugiyama\", \"Droid Sans\", \"Droid Sans Mono\", \"Droid Serif\", \"Duru Sans\", \"Dynalight\", \"EB Garamond\", \"Eagle Lake\", \"Eater\", \"Economica\", \"Eczar\", \"Ek Mukta\", \"Electrolize\", \"Elsie\", \"Elsie Swash Caps\", \"Emblema One\", \"Emilys Candy\", \"Engagement\", \"Englebert\", \"Enriqueta\", \"Erica One\", \"Esteban\", \"Euphoria Script\", \"Ewert\", \"Exo\", \"Exo 2\", \"Expletus Sans\", \"Fanwood Text\", \"Fascinate\", \"Fascinate Inline\", \"Faster One\", \"Fasthand\", \"Fauna One\", \"Federant\", \"Federo\", \"Felipa\", \"Fenix\", \"Finger Paint\", \"Fira Mono\", \"Fira Sans\", \"Fjalla One\", \"Fjord One\", \"Flamenco\", \"Flavors\", \"Fondamento\", \"Fontdiner Swanky\", \"Forum\", \"Francois One\", \"Freckle Face\", \"Fredericka the Great\", \"Fredoka One\", \"Freehand\", \"Fresca\", \"Frijole\", \"Fruktur\", \"Fugaz One\", \"GFS Didot\", \"GFS Neohellenic\", \"Gabriela\", \"Gafata\", \"Galdeano\", \"Galindo\", \"Gentium Basic\", \"Gentium Book Basic\", \"Geo\", \"Geostar\", \"Geostar Fill\", \"Germania One\", \"Gidugu\", \"Gilda Display\", \"Give You Glory\", \"Glass Antiqua\", \"Glegoo\", \"Gloria Hallelujah\", \"Goblin One\", \"Gochi Hand\", \"Gorditas\", \"Goudy Bookletter 1911\", \"Graduate\", \"Grand Hotel\", \"Gravitas One\", \"Great Vibes\", \"Griffy\", \"Gruppo\", \"Gudea\", \"Gurajada\", \"Habibi\", \"Halant\", \"Hammersmith One\", \"Hanalei\", \"Hanalei Fill\", \"Handlee\", \"Hanuman\", \"Happy Monkey\", \"Headland One\", \"Henny Penny\", \"Herr Von Muellerhoff\", \"Hind\", \"Hind Siliguri\", \"Hind Vadodara\", \"Holtwood One SC\", \"Homemade Apple\", \"Homenaje\", \"IM Fell DW Pica\", \"IM Fell DW Pica SC\", \"IM Fell Double Pica\", \"IM Fell Double Pica SC\", \"IM Fell English\", \"IM Fell English SC\", \"IM Fell French Canon\", \"IM Fell French Canon SC\", \"IM Fell Great Primer\", \"IM Fell Great Primer SC\", \"Iceberg\", \"Iceland\", \"Imprima\", \"Inconsolata\", \"Inder\", \"Indie Flower\", \"Inika\", \"Inknut Antiqua\", \"Irish Grover\", \"Istok Web\", \"Italiana\", \"Italianno\", \"Itim\", \"Jacques Francois\", \"Jacques Francois Shadow\", \"Jaldi\", \"Jim Nightshade\", \"Jockey One\", \"Jolly Lodger\", \"Josefin Sans\", \"Josefin Slab\", \"Joti One\", \"Judson\", \"Julee\", \"Julius Sans One\", \"Junge\", \"Jura\", \"Just Another Hand\", \"Just Me Again Down Here\", \"Kadwa\", \"Kalam\", \"Kameron\", \"Kantumruy\", \"Karla\", \"Karma\", \"Kaushan Script\", \"Kavoon\", \"Kdam Thmor\", \"Keania One\", \"Kelly Slab\", \"Kenia\", \"Khand\", \"Khmer\", \"Khula\", \"Kite One\", \"Knewave\", \"Kotta One\", \"Koulen\", \"Kranky\", \"Kreon\", \"Kristi\", \"Krona One\", \"Kurale\", \"La Belle Aurore\", \"Laila\", \"Lakki Reddy\", \"Lancelot\", \"Lateef\", \"Lato\", \"League Script\", \"Leckerli One\", \"Ledger\", \"Lekton\", \"Lemon\", \"Libre Baskerville\", \"Life Savers\", \"Lilita One\", \"Lily Script One\", \"Limelight\", \"Linden Hill\", \"Lobster\", \"Lobster Two\", \"Londrina Outline\", \"Londrina Shadow\", \"Londrina Sketch\", \"Londrina Solid\", \"Lora\", \"Love Ya Like A Sister\", \"Loved by the King\", \"Lovers Quarrel\", \"Luckiest Guy\", \"Lusitana\", \"Lustria\", \"Macondo\", \"Macondo Swash Caps\", \"Magra\", \"Maiden Orange\", \"Mako\", \"Mallanna\", \"Mandali\", \"Marcellus\", \"Marcellus SC\", \"Marck Script\", \"Margarine\", \"Marko One\", \"Marmelad\", \"Martel\", \"Martel Sans\", \"Marvel\", \"Mate\", \"Mate SC\", \"Maven Pro\", \"McLaren\", \"Meddon\", \"MedievalSharp\", \"Medula One\", \"Megrim\", \"Meie Script\", \"Merienda\", \"Merienda One\", \"Merriweather\", \"Merriweather Sans\", \"Metal\", \"Metal Mania\", \"Metamorphous\", \"Metrophobic\", \"Michroma\", \"Milonga\", \"Miltonian\", \"Miltonian Tattoo\", \"Miniver\", \"Miss Fajardose\", \"Modak\", \"Modern Antiqua\", \"Molengo\", \"Molle\", \"Monda\", \"Monofett\", \"Monoton\", \"Monsieur La Doulaise\", \"Montaga\", \"Montez\", \"Montserrat\", \"Montserrat Alternates\", \"Montserrat Subrayada\", \"Moul\", \"Moulpali\", \"Mountains of Christmas\", \"Mouse Memoirs\", \"Mr Bedfort\", \"Mr Dafoe\", \"Mr De Haviland\", \"Mrs Saint Delafield\", \"Mrs Sheppards\", \"Muli\", \"Mystery Quest\", \"NTR\", \"Neucha\", \"Neuton\", \"New Rocker\", \"News Cycle\", \"Niconne\", \"Nixie One\", \"Nobile\", \"Nokora\", \"Norican\", \"Nosifer\", \"Nothing You Could Do\", \"Noticia Text\", \"Noto Sans\", \"Noto Serif\", \"Nova Cut\", \"Nova Flat\", \"Nova Mono\", \"Nova Oval\", \"Nova Round\", \"Nova Script\", \"Nova Slim\", \"Nova Square\", \"Numans\", \"Nunito\", \"Odor Mean Chey\", \"Offside\", \"Old Standard TT\", \"Oldenburg\", \"Oleo Script\", \"Oleo Script Swash Caps\", \"Open Sans\", \"Open Sans Condensed\", \"Oranienbaum\", \"Orbitron\", \"Oregano\", \"Orienta\", \"Original Surfer\", \"Oswald\", \"Over the Rainbow\", \"Overlock\", \"Overlock SC\", \"Ovo\", \"Oxygen\", \"Oxygen Mono\", \"PT Mono\", \"PT Sans\", \"PT Sans Caption\", \"PT Sans Narrow\", \"PT Serif\", \"PT Serif Caption\", \"Pacifico\", \"Palanquin\", \"Palanquin Dark\", \"Paprika\", \"Parisienne\", \"Passero One\", \"Passion One\", \"Pathway Gothic One\", \"Patrick Hand\", \"Patrick Hand SC\", \"Patua One\", \"Paytone One\", \"Peddana\", \"Peralta\", \"Permanent Marker\", \"Petit Formal Script\", \"Petrona\", \"Philosopher\", \"Piedra\", \"Pinyon Script\", \"Pirata One\", \"Plaster\", \"Play\", \"Playball\", \"Playfair Display\", \"Playfair Display SC\", \"Podkova\", \"Poiret One\", \"Poller One\", \"Poly\", \"Pompiere\", \"Pontano Sans\", \"Poppins\", \"Port Lligat Sans\", \"Port Lligat Slab\", \"Pragati Narrow\", \"Prata\", \"Preahvihear\", \"Press Start 2P\", \"Princess Sofia\", \"Prociono\", \"Prosto One\", \"Puritan\", \"Purple Purse\", \"Quando\", \"Quantico\", \"Quattrocento\", \"Quattrocento Sans\", \"Questrial\", \"Quicksand\", \"Quintessential\", \"Qwigley\", \"Racing Sans One\", \"Radley\", \"Rajdhani\", \"Raleway\", \"Raleway Dots\", \"Ramabhadra\", \"Ramaraja\", \"Rambla\", \"Rammetto One\", \"Ranchers\", \"Rancho\", \"Ranga\", \"Rationale\", \"Ravi Prakash\", \"Redressed\", \"Reenie Beanie\", \"Revalia\", \"Rhodium Libre\", \"Ribeye\", \"Ribeye Marrow\", \"Righteous\", \"Risque\", \"Roboto\", \"Roboto Condensed\", \"Roboto Mono\", \"Roboto Slab\", \"Rochester\", \"Rock Salt\", \"Rokkitt\", \"Romanesco\", \"Ropa Sans\", \"Rosario\", \"Rosarivo\", \"Rouge Script\", \"Rozha One\", \"Rubik\", \"Rubik Mono One\", \"Rubik One\", \"Ruda\", \"Rufina\", \"Ruge Boogie\", \"Ruluko\", \"Rum Raisin\", \"Ruslan Display\", \"Russo One\", \"Ruthie\", \"Rye\", \"Sacramento\", \"Sahitya\", \"Sail\", \"Salsa\", \"Sanchez\", \"Sancreek\", \"Sansita One\", \"Sarala\", \"Sarina\", \"Sarpanch\", \"Satisfy\", \"Scada\", \"Scheherazade\", \"Schoolbell\", \"Seaweed Script\", \"Sevillana\", \"Seymour One\", \"Shadows Into Light\", \"Shadows Into Light Two\", \"Shanti\", \"Share\", \"Share Tech\", \"Share Tech Mono\", \"Shojumaru\", \"Short Stack\", \"Siemreap\", \"Sigmar One\", \"Signika\", \"Signika Negative\", \"Simonetta\", \"Sintony\", \"Sirin Stencil\", \"Six Caps\", \"Skranji\", \"Slabo 13px\", \"Slabo 27px\", \"Slackey\", \"Smokum\", \"Smythe\", \"Sniglet\", \"Snippet\", \"Snowburst One\", \"Sofadi One\", \"Sofia\", \"Sonsie One\", \"Sorts Mill Goudy\", \"Source Code Pro\", \"Source Sans Pro\", \"Source Serif Pro\", \"Special Elite\", \"Spicy Rice\", \"Spinnaker\", \"Spirax\", \"Squada One\", \"Sree Krushnadevaraya\", \"Stalemate\", \"Stalinist One\", \"Stardos Stencil\", \"Stint Ultra Condensed\", \"Stint Ultra Expanded\", \"Stoke\", \"Strait\", \"Sue Ellen Francisco\", \"Sumana\", \"Sunshiney\", \"Supermercado One\", \"Sura\", \"Suranna\", \"Suravaram\", \"Suwannaphum\", \"Swanky and Moo Moo\", \"Syncopate\", \"Tangerine\", \"Taprom\", \"Tauri\", \"Teko\", \"Telex\", \"Tenali Ramakrishna\", \"Tenor Sans\", \"Text Me One\", \"The Girl Next Door\", \"Tienne\", \"Tillana\", \"Timmana\", \"Tinos\", \"Titan One\", \"Titillium Web\", \"Trade Winds\", \"Trocchi\", \"Trochut\", \"Trykker\", \"Tulpen One\", \"Ubuntu\", \"Ubuntu Condensed\", \"Ubuntu Mono\", \"Ultra\", \"Uncial Antiqua\", \"Underdog\", \"Unica One\", \"UnifrakturCook\", \"UnifrakturMaguntia\", \"Unkempt\", \"Unlock\", \"Unna\", \"VT323\", \"Vampiro One\", \"Varela\", \"Varela Round\", \"Vast Shadow\", \"Vesper Libre\", \"Vibur\", \"Vidaloka\", \"Viga\", \"Voces\", \"Volkhov\", \"Vollkorn\", \"Voltaire\", \"Waiting for the Sunrise\", \"Wallpoet\", \"Walter Turncoat\", \"Warnes\", \"Wellfleet\", \"Wendy One\", \"Wire One\", \"Work Sans\", \"Yanone Kaffeesatz\", \"Yantramanav\", \"Yellowtail\", \"Yeseva One\", \"Yesteryear\", \"Zeyada\"];\n\n}).call(this);\n","export function deg2rad(degrees) {\n  return degrees * Math.PI / 180;\n}\n\nexport function getZoomForResolution(resolution, resolutions) {\n  let i = 0;\n  const ii = resolutions.length;\n  for (; i < ii; ++i) {\n    const candidate = resolutions[i];\n    if (candidate < resolution && i + 1 < ii) {\n      const zoomFactor = resolutions[i] / resolutions[i + 1];\n      return i + Math.log(resolutions[i] / resolution) / Math.log(zoomFactor);\n    }\n  }\n  return ii - 1;\n}\n","module.exports = createFilter;\n\nconst types = ['Unknown', 'Point', 'LineString', 'Polygon'];\n\n/**\n * Given a filter expressed as nested arrays, return a new function\n * that evaluates whether a given feature (with a .properties or .tags property)\n * passes its test.\n *\n * @private\n * @param {Array} filter mapbox gl filter\n * @returns {Function} filter-evaluating function\n */\nfunction createFilter(filter) {\n    return new Function('f', `var p = (f && f.properties || {}); return ${compile(filter)}`);\n}\n\nfunction compile(filter) {\n    if (!filter) return 'true';\n    const op = filter[0];\n    if (filter.length <= 1) return op === 'any' ? 'false' : 'true';\n    const str =\n        op === '==' ? compileComparisonOp(filter[1], filter[2], '===', false) :\n        op === '!=' ? compileComparisonOp(filter[1], filter[2], '!==', false) :\n        op === '<' ||\n        op === '>' ||\n        op === '<=' ||\n        op === '>=' ? compileComparisonOp(filter[1], filter[2], op, true) :\n        op === 'any' ? compileLogicalOp(filter.slice(1), '||') :\n        op === 'all' ? compileLogicalOp(filter.slice(1), '&&') :\n        op === 'none' ? compileNegation(compileLogicalOp(filter.slice(1), '||')) :\n        op === 'in' ? compileInOp(filter[1], filter.slice(2)) :\n        op === '!in' ? compileNegation(compileInOp(filter[1], filter.slice(2))) :\n        op === 'has' ? compileHasOp(filter[1]) :\n        op === '!has' ? compileNegation(compileHasOp(filter[1])) :\n        'true';\n    return `(${str})`;\n}\n\nfunction compilePropertyReference(property) {\n    const ref =\n        property === '$type' ? 'f.type' :\n        property === '$id' ? 'f.id' : `p[${JSON.stringify(property)}]`;\n    return ref;\n}\n\nfunction compileComparisonOp(property, value, op, checkType) {\n    const left = compilePropertyReference(property);\n    const right = property === '$type' ? types.indexOf(value) : JSON.stringify(value);\n    return (checkType ? `typeof ${left}=== typeof ${right}&&` : '') + left + op + right;\n}\n\nfunction compileLogicalOp(expressions, op) {\n    return expressions.map(compile).join(op);\n}\n\nfunction compileInOp(property, values) {\n    if (property === '$type') values = values.map((value) => {\n        return types.indexOf(value);\n    });\n    const left = JSON.stringify(values.sort(compare));\n    const right = compilePropertyReference(property);\n\n    if (values.length <= 200) return `${left}.indexOf(${right}) !== -1`;\n\n    return `${'function(v, a, i, j) {' +\n        'while (i <= j) { var m = (i + j) >> 1;' +\n        '    if (a[m] === v) return true; if (a[m] > v) j = m - 1; else i = m + 1;' +\n        '}' +\n    'return false; }('}${right}, ${left},0,${values.length - 1})`;\n}\n\nfunction compileHasOp(property) {\n    return property === '$id' ? '\"id\" in f' : `${JSON.stringify(property)} in p`;\n}\n\nfunction compileNegation(expression) {\n    return `!(${expression})`;\n}\n\n// Comparison function to sort numbers and strings\nfunction compare(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0;\n}\n","\nmodule.exports = ['type', 'source', 'source-layer', 'minzoom', 'maxzoom', 'filter', 'layout'];\n","\nconst refProperties = require('./util/ref_properties');\n\nfunction deref(layer, parent) {\n    const result = {};\n\n    for (const k in layer) {\n        if (k !== 'ref') {\n            result[k] = layer[k];\n        }\n    }\n\n    refProperties.forEach((k) => {\n        if (k in parent) {\n            result[k] = parent[k];\n        }\n    });\n\n    return result;\n}\n\nmodule.exports = derefLayers;\n\n/**\n * Given an array of layers, some of which may contain `ref` properties\n * whose value is the `id` of another property, return a new array where\n * such layers have been augmented with the 'type', 'source', etc. properties\n * from the parent layer, and the `ref` property has been removed.\n *\n * The input is not modified. The output may contain references to portions\n * of the input.\n *\n * @private\n * @param {Array<Layer>} layers\n * @returns {Array<Layer>}\n */\nfunction derefLayers(layers) {\n    layers = layers.slice();\n\n    const map = Object.create(null);\n    for (let i = 0; i < layers.length; i++) {\n        map[layers[i].id] = layers[i];\n    }\n\n    for (let i = 0; i < layers.length; i++) {\n        if ('ref' in layers[i]) {\n            layers[i] = deref(layers[i], map[layers[i].ref]);\n        }\n    }\n\n    return layers;\n}\n","module.exports = ol.geom.Point;","module.exports = ol.style.Circle;","/**\n * @module ol/style/TextPlacement\n */\n\n/**\n * Text placement. One of `'point'`, `'line'`. Default is `'point'`. Note that\n * `'line'` requires the underlying geometry to be a {@link ol.geom.LineString},\n * {@link ol.geom.Polygon}, {@link ol.geom.MultiLineString} or\n * {@link ol.geom.MultiPolygon}.\n * @enum {string}\n */\nexport default {\n  POINT: 'point',\n  LINE: 'line'\n};\n","/**\n * @module ol/math\n */\nimport {assert} from './asserts.js';\n\n/**\n * Takes a number and clamps it to within the provided bounds.\n * @param {number} value The input number.\n * @param {number} min The minimum value to return.\n * @param {number} max The maximum value to return.\n * @return {number} The input number if it is within bounds, or the nearest\n *     number within the bounds.\n */\nexport function clamp(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n}\n\n\n/**\n * Return the hyperbolic cosine of a given number. The method will use the\n * native `Math.cosh` function if it is available, otherwise the hyperbolic\n * cosine will be calculated via the reference implementation of the Mozilla\n * developer network.\n *\n * @param {number} x X.\n * @return {number} Hyperbolic cosine of x.\n */\nexport const cosh  = (function() {\n  // Wrapped in a iife, to save the overhead of checking for the native\n  // implementation on every invocation.\n  let cosh;\n  if ('cosh' in Math) {\n    // The environment supports the native Math.cosh function, use it\n    cosh = Math.cosh;\n  } else {\n    //  else, use the reference implementation of MDN:\n    cosh = function(x) {\n      const y = Math.exp(x);\n      return (y + 1 / y) / 2;\n    };\n  }\n  return cosh;\n}());\n\n\n/**\n * @param {number} x X.\n * @return {number} The smallest power of two greater than or equal to x.\n */\nexport function roundUpToPowerOfTwo(x) {\n  assert(0 < x, 29); // `x` must be greater than `0`\n  return Math.pow(2, Math.ceil(Math.log(x) / Math.LN2));\n}\n\n\n/**\n * Returns the square of the closest distance between the point (x, y) and the\n * line segment (x1, y1) to (x2, y2).\n * @param {number} x X.\n * @param {number} y Y.\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredSegmentDistance(x, y, x1, y1, x2, y2) {\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  if (dx !== 0 || dy !== 0) {\n    const t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy);\n    if (t > 1) {\n      x1 = x2;\n      y1 = y2;\n    } else if (t > 0) {\n      x1 += dx * t;\n      y1 += dy * t;\n    }\n  }\n  return squaredDistance(x, y, x1, y1);\n}\n\n\n/**\n * Returns the square of the distance between the points (x1, y1) and (x2, y2).\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredDistance(x1, y1, x2, y2) {\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  return dx * dx + dy * dy;\n}\n\n\n/**\n * Solves system of linear equations using Gaussian elimination method.\n *\n * @param {Array.<Array.<number>>} mat Augmented matrix (n x n + 1 column)\n *                                     in row-major order.\n * @return {Array.<number>} The resulting vector.\n */\nexport function solveLinearSystem(mat) {\n  const n = mat.length;\n\n  for (let i = 0; i < n; i++) {\n    // Find max in the i-th column (ignoring i - 1 first rows)\n    let maxRow = i;\n    let maxEl = Math.abs(mat[i][i]);\n    for (let r = i + 1; r < n; r++) {\n      const absValue = Math.abs(mat[r][i]);\n      if (absValue > maxEl) {\n        maxEl = absValue;\n        maxRow = r;\n      }\n    }\n\n    if (maxEl === 0) {\n      return null; // matrix is singular\n    }\n\n    // Swap max row with i-th (current) row\n    const tmp = mat[maxRow];\n    mat[maxRow] = mat[i];\n    mat[i] = tmp;\n\n    // Subtract the i-th row to make all the remaining rows 0 in the i-th column\n    for (let j = i + 1; j < n; j++) {\n      const coef = -mat[j][i] / mat[i][i];\n      for (let k = i; k < n + 1; k++) {\n        if (i == k) {\n          mat[j][k] = 0;\n        } else {\n          mat[j][k] += coef * mat[i][k];\n        }\n      }\n    }\n  }\n\n  // Solve Ax=b for upper triangular matrix A (mat)\n  const x = new Array(n);\n  for (let l = n - 1; l >= 0; l--) {\n    x[l] = mat[l][n] / mat[l][l];\n    for (let m = l - 1; m >= 0; m--) {\n      mat[m][n] -= mat[m][l] * x[l];\n    }\n  }\n  return x;\n}\n\n\n/**\n * Converts radians to to degrees.\n *\n * @param {number} angleInRadians Angle in radians.\n * @return {number} Angle in degrees.\n */\nexport function toDegrees(angleInRadians) {\n  return angleInRadians * 180 / Math.PI;\n}\n\n\n/**\n * Converts degrees to radians.\n *\n * @param {number} angleInDegrees Angle in degrees.\n * @return {number} Angle in radians.\n */\nexport function toRadians(angleInDegrees) {\n  return angleInDegrees * Math.PI / 180;\n}\n\n/**\n * Returns the modulo of a / b, depending on the sign of b.\n *\n * @param {number} a Dividend.\n * @param {number} b Divisor.\n * @return {number} Modulo.\n */\nexport function modulo(a, b) {\n  const r = a % b;\n  return r * b < 0 ? r + b : r;\n}\n\n/**\n * Calculates the linearly interpolated value of x between a and b.\n *\n * @param {number} a Number\n * @param {number} b Number\n * @param {number} x Value to be interpolated.\n * @return {number} Interpolated value.\n */\nexport function lerp(a, b, x) {\n  return a + x * (b - a);\n}\n","/**\n * @module ol/AssertionError\n */\nimport {VERSION, inherits} from './index.js';\n\n/**\n * Error object thrown when an assertion failed. This is an ECMA-262 Error,\n * extended with a `code` property.\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error}\n * @constructor\n * @extends {Error}\n * @implements {oli.AssertionError}\n * @param {number} code Error code.\n */\nconst AssertionError = function(code) {\n\n  const path = VERSION ? VERSION.split('-')[0] : 'latest';\n\n  /**\n   * @type {string}\n   */\n  this.message = 'Assertion failed. See https://openlayers.org/en/' + path +\n      '/doc/errors/#' + code + ' for details.';\n\n  /**\n   * Error code. The meaning of the code can be found on\n   * {@link https://openlayers.org/en/latest/doc/errors/} (replace `latest` with\n   * the version found in the OpenLayers script's header comment if a version\n   * other than the latest is used).\n   * @type {number}\n   * @api\n   */\n  this.code = code;\n\n  this.name = 'AssertionError';\n\n};\n\ninherits(AssertionError, Error);\n\nexport default AssertionError;\n","/**\n * @module ol/color\n */\nimport {assert} from './asserts.js';\nimport {clamp} from './math.js';\n\n\n/**\n * This RegExp matches # followed by 3, 4, 6, or 8 hex digits.\n * @const\n * @type {RegExp}\n * @private\n */\nconst HEX_COLOR_RE_ = /^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i;\n\n\n/**\n * Regular expression for matching potential named color style strings.\n * @const\n * @type {RegExp}\n * @private\n */\nconst NAMED_COLOR_RE_ = /^([a-z]*)$/i;\n\n\n/**\n * Return the color as an rgba string.\n * @param {ol.Color|string} color Color.\n * @return {string} Rgba string.\n * @api\n */\nexport function asString(color) {\n  if (typeof color === 'string') {\n    return color;\n  } else {\n    return toString(color);\n  }\n}\n\n/**\n * Return named color as an rgba string.\n * @param {string} color Named color.\n * @return {string} Rgb string.\n */\nfunction fromNamed(color) {\n  const el = document.createElement('div');\n  el.style.color = color;\n  if (el.style.color !== '') {\n    document.body.appendChild(el);\n    const rgb = getComputedStyle(el).color;\n    document.body.removeChild(el);\n    return rgb;\n  } else {\n    return '';\n  }\n}\n\n\n/**\n * @param {string} s String.\n * @return {ol.Color} Color.\n */\nexport const fromString = (\n  function() {\n\n    // We maintain a small cache of parsed strings.  To provide cheap LRU-like\n    // semantics, whenever the cache grows too large we simply delete an\n    // arbitrary 25% of the entries.\n\n    /**\n     * @const\n     * @type {number}\n     */\n    const MAX_CACHE_SIZE = 1024;\n\n    /**\n     * @type {Object.<string, ol.Color>}\n     */\n    const cache = {};\n\n    /**\n     * @type {number}\n     */\n    let cacheSize = 0;\n\n    return (\n      /**\n       * @param {string} s String.\n       * @return {ol.Color} Color.\n       */\n      function(s) {\n        let color;\n        if (cache.hasOwnProperty(s)) {\n          color = cache[s];\n        } else {\n          if (cacheSize >= MAX_CACHE_SIZE) {\n            let i = 0;\n            for (const key in cache) {\n              if ((i++ & 3) === 0) {\n                delete cache[key];\n                --cacheSize;\n              }\n            }\n          }\n          color = fromStringInternal_(s);\n          cache[s] = color;\n          ++cacheSize;\n        }\n        return color;\n      }\n    );\n\n  })();\n\n/**\n * Return the color as an array. This function maintains a cache of calculated\n * arrays which means the result should not be modified.\n * @param {ol.Color|string} color Color.\n * @return {ol.Color} Color.\n * @api\n */\nexport function asArray(color) {\n  if (Array.isArray(color)) {\n    return color;\n  } else {\n    return fromString(/** @type {string} */ (color));\n  }\n}\n\n/**\n * @param {string} s String.\n * @private\n * @return {ol.Color} Color.\n */\nfunction fromStringInternal_(s) {\n  let r, g, b, a, color;\n\n  if (NAMED_COLOR_RE_.exec(s)) {\n    s = fromNamed(s);\n  }\n\n  if (HEX_COLOR_RE_.exec(s)) { // hex\n    const n = s.length - 1; // number of hex digits\n    let d; // number of digits per channel\n    if (n <= 4) {\n      d = 1;\n    } else {\n      d = 2;\n    }\n    const hasAlpha = n === 4 || n === 8;\n    r = parseInt(s.substr(1 + 0 * d, d), 16);\n    g = parseInt(s.substr(1 + 1 * d, d), 16);\n    b = parseInt(s.substr(1 + 2 * d, d), 16);\n    if (hasAlpha) {\n      a = parseInt(s.substr(1 + 3 * d, d), 16);\n    } else {\n      a = 255;\n    }\n    if (d == 1) {\n      r = (r << 4) + r;\n      g = (g << 4) + g;\n      b = (b << 4) + b;\n      if (hasAlpha) {\n        a = (a << 4) + a;\n      }\n    }\n    color = [r, g, b, a / 255];\n  } else if (s.indexOf('rgba(') == 0) { // rgba()\n    color = s.slice(5, -1).split(',').map(Number);\n    normalize(color);\n  } else if (s.indexOf('rgb(') == 0) { // rgb()\n    color = s.slice(4, -1).split(',').map(Number);\n    color.push(1);\n    normalize(color);\n  } else {\n    assert(false, 14); // Invalid color\n  }\n  return /** @type {ol.Color} */ (color);\n}\n\n\n/**\n * TODO this function is only used in the test, we probably shouldn't export it\n * @param {ol.Color} color Color.\n * @return {ol.Color} Clamped color.\n */\nexport function normalize(color) {\n  color[0] = clamp((color[0] + 0.5) | 0, 0, 255);\n  color[1] = clamp((color[1] + 0.5) | 0, 0, 255);\n  color[2] = clamp((color[2] + 0.5) | 0, 0, 255);\n  color[3] = clamp(color[3], 0, 1);\n  return color;\n}\n\n\n/**\n * @param {ol.Color} color Color.\n * @return {string} String.\n */\nexport function toString(color) {\n  let r = color[0];\n  if (r != (r | 0)) {\n    r = (r + 0.5) | 0;\n  }\n  let g = color[1];\n  if (g != (g | 0)) {\n    g = (g + 0.5) | 0;\n  }\n  let b = color[2];\n  if (b != (b | 0)) {\n    b = (b + 0.5) | 0;\n  }\n  const a = color[3] === undefined ? 1 : color[3];\n  return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n}\n","/**\n * @module ol/style/Fill\n */\nimport {getUid} from '../index.js';\nimport {asString} from '../color.js';\n\n/**\n * @classdesc\n * Set fill style for vector features.\n *\n * @constructor\n * @param {olx.style.FillOptions=} opt_options Options.\n * @api\n */\nconst Fill = function(opt_options) {\n\n  const options = opt_options || {};\n\n  /**\n   * @private\n   * @type {ol.Color|ol.ColorLike}\n   */\n  this.color_ = options.color !== undefined ? options.color : null;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.checksum_ = undefined;\n};\n\n\n/**\n * Clones the style. The color is not cloned if it is an {@link ol.ColorLike}.\n * @return {ol.style.Fill} The cloned style.\n * @api\n */\nFill.prototype.clone = function() {\n  const color = this.getColor();\n  return new Fill({\n    color: (color && color.slice) ? color.slice() : color || undefined\n  });\n};\n\n\n/**\n * Get the fill color.\n * @return {ol.Color|ol.ColorLike} Color.\n * @api\n */\nFill.prototype.getColor = function() {\n  return this.color_;\n};\n\n\n/**\n * Set the color.\n *\n * @param {ol.Color|ol.ColorLike} color Color.\n * @api\n */\nFill.prototype.setColor = function(color) {\n  this.color_ = color;\n  this.checksum_ = undefined;\n};\n\n\n/**\n * @return {string} The checksum.\n */\nFill.prototype.getChecksum = function() {\n  if (this.checksum_ === undefined) {\n    if (\n      this.color_ instanceof CanvasPattern ||\n        this.color_ instanceof CanvasGradient\n    ) {\n      this.checksum_ = getUid(this.color_).toString();\n    } else {\n      this.checksum_ = 'f' + (this.color_ ? asString(this.color_) : '-');\n    }\n  }\n\n  return this.checksum_;\n};\nexport default Fill;\n","/**\n * @module ol/style/Text\n */\nimport Fill from '../style/Fill.js';\nimport TextPlacement from '../style/TextPlacement.js';\n\n\n/**\n * The default fill color to use if no fill was set at construction time; a\n * blackish `#333`.\n *\n * @const {string}\n */\nconst DEFAULT_FILL_COLOR = '#333';\n\n\n/**\n * @classdesc\n * Set text style for vector features.\n *\n * @constructor\n * @param {olx.style.TextOptions=} opt_options Options.\n * @api\n */\nconst Text = function(opt_options) {\n\n  const options = opt_options || {};\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.font_ = options.font;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.rotation_ = options.rotation;\n\n  /**\n   * @private\n   * @type {boolean|undefined}\n   */\n  this.rotateWithView_ = options.rotateWithView;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.scale_ = options.scale;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.text_ = options.text;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.textAlign_ = options.textAlign;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.textBaseline_ = options.textBaseline;\n\n  /**\n   * @private\n   * @type {ol.style.Fill}\n   */\n  this.fill_ = options.fill !== undefined ? options.fill :\n    new Fill({color: DEFAULT_FILL_COLOR});\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxAngle_ = options.maxAngle !== undefined ? options.maxAngle : Math.PI / 4;\n\n  /**\n   * @private\n   * @type {ol.style.TextPlacement|string}\n   */\n  this.placement_ = options.placement !== undefined ? options.placement : TextPlacement.POINT;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.overflow_ = !!options.overflow;\n\n  /**\n   * @private\n   * @type {ol.style.Stroke}\n   */\n  this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.offsetX_ = options.offsetX !== undefined ? options.offsetX : 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.offsetY_ = options.offsetY !== undefined ? options.offsetY : 0;\n\n  /**\n   * @private\n   * @type {ol.style.Fill}\n   */\n  this.backgroundFill_ = options.backgroundFill ? options.backgroundFill : null;\n\n  /**\n   * @private\n   * @type {ol.style.Stroke}\n   */\n  this.backgroundStroke_ = options.backgroundStroke ? options.backgroundStroke : null;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.padding_ = options.padding === undefined ? null : options.padding;\n};\n\n\n/**\n * Clones the style.\n * @return {ol.style.Text} The cloned style.\n * @api\n */\nText.prototype.clone = function() {\n  return new Text({\n    font: this.getFont(),\n    placement: this.getPlacement(),\n    maxAngle: this.getMaxAngle(),\n    overflow: this.getOverflow(),\n    rotation: this.getRotation(),\n    rotateWithView: this.getRotateWithView(),\n    scale: this.getScale(),\n    text: this.getText(),\n    textAlign: this.getTextAlign(),\n    textBaseline: this.getTextBaseline(),\n    fill: this.getFill() ? this.getFill().clone() : undefined,\n    stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n    offsetX: this.getOffsetX(),\n    offsetY: this.getOffsetY(),\n    backgroundFill: this.getBackgroundFill() ? this.getBackgroundFill().clone() : undefined,\n    backgroundStroke: this.getBackgroundStroke() ? this.getBackgroundStroke().clone() : undefined\n  });\n};\n\n\n/**\n * Get the `overflow` configuration.\n * @return {boolean} Let text overflow the length of the path they follow.\n * @api\n */\nText.prototype.getOverflow = function() {\n  return this.overflow_;\n};\n\n\n/**\n * Get the font name.\n * @return {string|undefined} Font.\n * @api\n */\nText.prototype.getFont = function() {\n  return this.font_;\n};\n\n\n/**\n * Get the maximum angle between adjacent characters.\n * @return {number} Angle in radians.\n * @api\n */\nText.prototype.getMaxAngle = function() {\n  return this.maxAngle_;\n};\n\n\n/**\n * Get the label placement.\n * @return {ol.style.TextPlacement|string} Text placement.\n * @api\n */\nText.prototype.getPlacement = function() {\n  return this.placement_;\n};\n\n\n/**\n * Get the x-offset for the text.\n * @return {number} Horizontal text offset.\n * @api\n */\nText.prototype.getOffsetX = function() {\n  return this.offsetX_;\n};\n\n\n/**\n * Get the y-offset for the text.\n * @return {number} Vertical text offset.\n * @api\n */\nText.prototype.getOffsetY = function() {\n  return this.offsetY_;\n};\n\n\n/**\n * Get the fill style for the text.\n * @return {ol.style.Fill} Fill style.\n * @api\n */\nText.prototype.getFill = function() {\n  return this.fill_;\n};\n\n\n/**\n * Determine whether the text rotates with the map.\n * @return {boolean|undefined} Rotate with map.\n * @api\n */\nText.prototype.getRotateWithView = function() {\n  return this.rotateWithView_;\n};\n\n\n/**\n * Get the text rotation.\n * @return {number|undefined} Rotation.\n * @api\n */\nText.prototype.getRotation = function() {\n  return this.rotation_;\n};\n\n\n/**\n * Get the text scale.\n * @return {number|undefined} Scale.\n * @api\n */\nText.prototype.getScale = function() {\n  return this.scale_;\n};\n\n\n/**\n * Get the stroke style for the text.\n * @return {ol.style.Stroke} Stroke style.\n * @api\n */\nText.prototype.getStroke = function() {\n  return this.stroke_;\n};\n\n\n/**\n * Get the text to be rendered.\n * @return {string|undefined} Text.\n * @api\n */\nText.prototype.getText = function() {\n  return this.text_;\n};\n\n\n/**\n * Get the text alignment.\n * @return {string|undefined} Text align.\n * @api\n */\nText.prototype.getTextAlign = function() {\n  return this.textAlign_;\n};\n\n\n/**\n * Get the text baseline.\n * @return {string|undefined} Text baseline.\n * @api\n */\nText.prototype.getTextBaseline = function() {\n  return this.textBaseline_;\n};\n\n\n/**\n * Get the background fill style for the text.\n * @return {ol.style.Fill} Fill style.\n * @api\n */\nText.prototype.getBackgroundFill = function() {\n  return this.backgroundFill_;\n};\n\n\n/**\n * Get the background stroke style for the text.\n * @return {ol.style.Stroke} Stroke style.\n * @api\n */\nText.prototype.getBackgroundStroke = function() {\n  return this.backgroundStroke_;\n};\n\n\n/**\n * Get the padding for the text.\n * @return {Array.<number>} Padding.\n * @api\n */\nText.prototype.getPadding = function() {\n  return this.padding_;\n};\n\n\n/**\n * Set the `overflow` property.\n *\n * @param {boolean} overflow Let text overflow the path that it follows.\n * @api\n */\nText.prototype.setOverflow = function(overflow) {\n  this.overflow_ = overflow;\n};\n\n\n/**\n * Set the font.\n *\n * @param {string|undefined} font Font.\n * @api\n */\nText.prototype.setFont = function(font) {\n  this.font_ = font;\n};\n\n\n/**\n * Set the maximum angle between adjacent characters.\n *\n * @param {number} maxAngle Angle in radians.\n * @api\n */\nText.prototype.setMaxAngle = function(maxAngle) {\n  this.maxAngle_ = maxAngle;\n};\n\n\n/**\n * Set the x offset.\n *\n * @param {number} offsetX Horizontal text offset.\n * @api\n */\nText.prototype.setOffsetX = function(offsetX) {\n  this.offsetX_ = offsetX;\n};\n\n\n/**\n * Set the y offset.\n *\n * @param {number} offsetY Vertical text offset.\n * @api\n */\nText.prototype.setOffsetY = function(offsetY) {\n  this.offsetY_ = offsetY;\n};\n\n\n/**\n * Set the text placement.\n *\n * @param {ol.style.TextPlacement|string} placement Placement.\n * @api\n */\nText.prototype.setPlacement = function(placement) {\n  this.placement_ = placement;\n};\n\n\n/**\n * Set the fill.\n *\n * @param {ol.style.Fill} fill Fill style.\n * @api\n */\nText.prototype.setFill = function(fill) {\n  this.fill_ = fill;\n};\n\n\n/**\n * Set the rotation.\n *\n * @param {number|undefined} rotation Rotation.\n * @api\n */\nText.prototype.setRotation = function(rotation) {\n  this.rotation_ = rotation;\n};\n\n\n/**\n * Set the scale.\n *\n * @param {number|undefined} scale Scale.\n * @api\n */\nText.prototype.setScale = function(scale) {\n  this.scale_ = scale;\n};\n\n\n/**\n * Set the stroke.\n *\n * @param {ol.style.Stroke} stroke Stroke style.\n * @api\n */\nText.prototype.setStroke = function(stroke) {\n  this.stroke_ = stroke;\n};\n\n\n/**\n * Set the text.\n *\n * @param {string|undefined} text Text.\n * @api\n */\nText.prototype.setText = function(text) {\n  this.text_ = text;\n};\n\n\n/**\n * Set the text alignment.\n *\n * @param {string|undefined} textAlign Text align.\n * @api\n */\nText.prototype.setTextAlign = function(textAlign) {\n  this.textAlign_ = textAlign;\n};\n\n\n/**\n * Set the text baseline.\n *\n * @param {string|undefined} textBaseline Text baseline.\n * @api\n */\nText.prototype.setTextBaseline = function(textBaseline) {\n  this.textBaseline_ = textBaseline;\n};\n\n\n/**\n * Set the background fill.\n *\n * @param {ol.style.Fill} fill Fill style.\n * @api\n */\nText.prototype.setBackgroundFill = function(fill) {\n  this.backgroundFill_ = fill;\n};\n\n\n/**\n * Set the background stroke.\n *\n * @param {ol.style.Stroke} stroke Stroke style.\n * @api\n */\nText.prototype.setBackgroundStroke = function(stroke) {\n  this.backgroundStroke_ = stroke;\n};\n\n\n/**\n * Set the padding (`[top, right, bottom, left]`).\n *\n * @param {!Array.<number>} padding Padding.\n * @api\n */\nText.prototype.setPadding = function(padding) {\n  this.padding_ = padding;\n};\nexport default Text;\n","module.exports = ol.style.Icon;","module.exports = ol.style.Stroke;","module.exports = ol.style.Fill;","module.exports = ol.style.Style;","\nmodule.exports = interpolate;\n\nfunction interpolate(a, b, t) {\n    return (a * (1 - t)) + (b * t);\n}\n\ninterpolate.number = interpolate;\n\ninterpolate.vec2 = function(from, to, t) {\n    return [\n        interpolate(from[0], to[0], t),\n        interpolate(from[1], to[1], t)\n    ];\n};\n\n/*\n * Interpolate between two colors given as 4-element arrays.\n *\n * @param {Color} from\n * @param {Color} to\n * @param {number} t interpolation factor between 0 and 1\n * @returns {Color} interpolated color\n */\ninterpolate.color = function(from, to, t) {\n    return [\n        interpolate(from[0], to[0], t),\n        interpolate(from[1], to[1], t),\n        interpolate(from[2], to[2], t),\n        interpolate(from[3], to[3], t)\n    ];\n};\n\ninterpolate.array = function(from, to, t) {\n    return from.map((d, i) => {\n        return interpolate(d, to[i], t);\n    });\n};\n","\nmodule.exports = function getType(val) {\n    if (val instanceof Number) {\n        return 'number';\n    } else if (val instanceof String) {\n        return 'string';\n    } else if (val instanceof Boolean) {\n        return 'boolean';\n    } else if (Array.isArray(val)) {\n        return 'array';\n    } else if (val === null) {\n        return 'null';\n    } else {\n        return typeof val;\n    }\n};\n","\nmodule.exports = function (output, ...inputs) {\n    for (const input of inputs) {\n        for (const k in input) {\n            output[k] = input[k];\n        }\n    }\n    return output;\n};\n","// (c) Dean McNamee <dean@gmail.com>, 2012.\n//\n// https://github.com/deanm/css-color-parser-js\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n// FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n// IN THE SOFTWARE.\n\n// http://www.w3.org/TR/css3-color/\nvar kCSSColorTable = {\n  \"transparent\": [0,0,0,0], \"aliceblue\": [240,248,255,1],\n  \"antiquewhite\": [250,235,215,1], \"aqua\": [0,255,255,1],\n  \"aquamarine\": [127,255,212,1], \"azure\": [240,255,255,1],\n  \"beige\": [245,245,220,1], \"bisque\": [255,228,196,1],\n  \"black\": [0,0,0,1], \"blanchedalmond\": [255,235,205,1],\n  \"blue\": [0,0,255,1], \"blueviolet\": [138,43,226,1],\n  \"brown\": [165,42,42,1], \"burlywood\": [222,184,135,1],\n  \"cadetblue\": [95,158,160,1], \"chartreuse\": [127,255,0,1],\n  \"chocolate\": [210,105,30,1], \"coral\": [255,127,80,1],\n  \"cornflowerblue\": [100,149,237,1], \"cornsilk\": [255,248,220,1],\n  \"crimson\": [220,20,60,1], \"cyan\": [0,255,255,1],\n  \"darkblue\": [0,0,139,1], \"darkcyan\": [0,139,139,1],\n  \"darkgoldenrod\": [184,134,11,1], \"darkgray\": [169,169,169,1],\n  \"darkgreen\": [0,100,0,1], \"darkgrey\": [169,169,169,1],\n  \"darkkhaki\": [189,183,107,1], \"darkmagenta\": [139,0,139,1],\n  \"darkolivegreen\": [85,107,47,1], \"darkorange\": [255,140,0,1],\n  \"darkorchid\": [153,50,204,1], \"darkred\": [139,0,0,1],\n  \"darksalmon\": [233,150,122,1], \"darkseagreen\": [143,188,143,1],\n  \"darkslateblue\": [72,61,139,1], \"darkslategray\": [47,79,79,1],\n  \"darkslategrey\": [47,79,79,1], \"darkturquoise\": [0,206,209,1],\n  \"darkviolet\": [148,0,211,1], \"deeppink\": [255,20,147,1],\n  \"deepskyblue\": [0,191,255,1], \"dimgray\": [105,105,105,1],\n  \"dimgrey\": [105,105,105,1], \"dodgerblue\": [30,144,255,1],\n  \"firebrick\": [178,34,34,1], \"floralwhite\": [255,250,240,1],\n  \"forestgreen\": [34,139,34,1], \"fuchsia\": [255,0,255,1],\n  \"gainsboro\": [220,220,220,1], \"ghostwhite\": [248,248,255,1],\n  \"gold\": [255,215,0,1], \"goldenrod\": [218,165,32,1],\n  \"gray\": [128,128,128,1], \"green\": [0,128,0,1],\n  \"greenyellow\": [173,255,47,1], \"grey\": [128,128,128,1],\n  \"honeydew\": [240,255,240,1], \"hotpink\": [255,105,180,1],\n  \"indianred\": [205,92,92,1], \"indigo\": [75,0,130,1],\n  \"ivory\": [255,255,240,1], \"khaki\": [240,230,140,1],\n  \"lavender\": [230,230,250,1], \"lavenderblush\": [255,240,245,1],\n  \"lawngreen\": [124,252,0,1], \"lemonchiffon\": [255,250,205,1],\n  \"lightblue\": [173,216,230,1], \"lightcoral\": [240,128,128,1],\n  \"lightcyan\": [224,255,255,1], \"lightgoldenrodyellow\": [250,250,210,1],\n  \"lightgray\": [211,211,211,1], \"lightgreen\": [144,238,144,1],\n  \"lightgrey\": [211,211,211,1], \"lightpink\": [255,182,193,1],\n  \"lightsalmon\": [255,160,122,1], \"lightseagreen\": [32,178,170,1],\n  \"lightskyblue\": [135,206,250,1], \"lightslategray\": [119,136,153,1],\n  \"lightslategrey\": [119,136,153,1], \"lightsteelblue\": [176,196,222,1],\n  \"lightyellow\": [255,255,224,1], \"lime\": [0,255,0,1],\n  \"limegreen\": [50,205,50,1], \"linen\": [250,240,230,1],\n  \"magenta\": [255,0,255,1], \"maroon\": [128,0,0,1],\n  \"mediumaquamarine\": [102,205,170,1], \"mediumblue\": [0,0,205,1],\n  \"mediumorchid\": [186,85,211,1], \"mediumpurple\": [147,112,219,1],\n  \"mediumseagreen\": [60,179,113,1], \"mediumslateblue\": [123,104,238,1],\n  \"mediumspringgreen\": [0,250,154,1], \"mediumturquoise\": [72,209,204,1],\n  \"mediumvioletred\": [199,21,133,1], \"midnightblue\": [25,25,112,1],\n  \"mintcream\": [245,255,250,1], \"mistyrose\": [255,228,225,1],\n  \"moccasin\": [255,228,181,1], \"navajowhite\": [255,222,173,1],\n  \"navy\": [0,0,128,1], \"oldlace\": [253,245,230,1],\n  \"olive\": [128,128,0,1], \"olivedrab\": [107,142,35,1],\n  \"orange\": [255,165,0,1], \"orangered\": [255,69,0,1],\n  \"orchid\": [218,112,214,1], \"palegoldenrod\": [238,232,170,1],\n  \"palegreen\": [152,251,152,1], \"paleturquoise\": [175,238,238,1],\n  \"palevioletred\": [219,112,147,1], \"papayawhip\": [255,239,213,1],\n  \"peachpuff\": [255,218,185,1], \"peru\": [205,133,63,1],\n  \"pink\": [255,192,203,1], \"plum\": [221,160,221,1],\n  \"powderblue\": [176,224,230,1], \"purple\": [128,0,128,1],\n  \"rebeccapurple\": [102,51,153,1],\n  \"red\": [255,0,0,1], \"rosybrown\": [188,143,143,1],\n  \"royalblue\": [65,105,225,1], \"saddlebrown\": [139,69,19,1],\n  \"salmon\": [250,128,114,1], \"sandybrown\": [244,164,96,1],\n  \"seagreen\": [46,139,87,1], \"seashell\": [255,245,238,1],\n  \"sienna\": [160,82,45,1], \"silver\": [192,192,192,1],\n  \"skyblue\": [135,206,235,1], \"slateblue\": [106,90,205,1],\n  \"slategray\": [112,128,144,1], \"slategrey\": [112,128,144,1],\n  \"snow\": [255,250,250,1], \"springgreen\": [0,255,127,1],\n  \"steelblue\": [70,130,180,1], \"tan\": [210,180,140,1],\n  \"teal\": [0,128,128,1], \"thistle\": [216,191,216,1],\n  \"tomato\": [255,99,71,1], \"turquoise\": [64,224,208,1],\n  \"violet\": [238,130,238,1], \"wheat\": [245,222,179,1],\n  \"white\": [255,255,255,1], \"whitesmoke\": [245,245,245,1],\n  \"yellow\": [255,255,0,1], \"yellowgreen\": [154,205,50,1]}\n\nfunction clamp_css_byte(i) {  // Clamp to integer 0 .. 255.\n  i = Math.round(i);  // Seems to be what Chrome does (vs truncation).\n  return i < 0 ? 0 : i > 255 ? 255 : i;\n}\n\nfunction clamp_css_float(f) {  // Clamp to float 0.0 .. 1.0.\n  return f < 0 ? 0 : f > 1 ? 1 : f;\n}\n\nfunction parse_css_int(str) {  // int or percentage.\n  if (str[str.length - 1] === '%')\n    return clamp_css_byte(parseFloat(str) / 100 * 255);\n  return clamp_css_byte(parseInt(str));\n}\n\nfunction parse_css_float(str) {  // float or percentage.\n  if (str[str.length - 1] === '%')\n    return clamp_css_float(parseFloat(str) / 100);\n  return clamp_css_float(parseFloat(str));\n}\n\nfunction css_hue_to_rgb(m1, m2, h) {\n  if (h < 0) h += 1;\n  else if (h > 1) h -= 1;\n\n  if (h * 6 < 1) return m1 + (m2 - m1) * h * 6;\n  if (h * 2 < 1) return m2;\n  if (h * 3 < 2) return m1 + (m2 - m1) * (2/3 - h) * 6;\n  return m1;\n}\n\nfunction parseCSSColor(css_str) {\n  // Remove all whitespace, not compliant, but should just be more accepting.\n  var str = css_str.replace(/ /g, '').toLowerCase();\n\n  // Color keywords (and transparent) lookup.\n  if (str in kCSSColorTable) return kCSSColorTable[str].slice();  // dup.\n\n  // #abc and #abc123 syntax.\n  if (str[0] === '#') {\n    if (str.length === 4) {\n      var iv = parseInt(str.substr(1), 16);  // TODO(deanm): Stricter parsing.\n      if (!(iv >= 0 && iv <= 0xfff)) return null;  // Covers NaN.\n      return [((iv & 0xf00) >> 4) | ((iv & 0xf00) >> 8),\n              (iv & 0xf0) | ((iv & 0xf0) >> 4),\n              (iv & 0xf) | ((iv & 0xf) << 4),\n              1];\n    } else if (str.length === 7) {\n      var iv = parseInt(str.substr(1), 16);  // TODO(deanm): Stricter parsing.\n      if (!(iv >= 0 && iv <= 0xffffff)) return null;  // Covers NaN.\n      return [(iv & 0xff0000) >> 16,\n              (iv & 0xff00) >> 8,\n              iv & 0xff,\n              1];\n    }\n\n    return null;\n  }\n\n  var op = str.indexOf('('), ep = str.indexOf(')');\n  if (op !== -1 && ep + 1 === str.length) {\n    var fname = str.substr(0, op);\n    var params = str.substr(op+1, ep-(op+1)).split(',');\n    var alpha = 1;  // To allow case fallthrough.\n    switch (fname) {\n      case 'rgba':\n        if (params.length !== 4) return null;\n        alpha = parse_css_float(params.pop());\n        // Fall through.\n      case 'rgb':\n        if (params.length !== 3) return null;\n        return [parse_css_int(params[0]),\n                parse_css_int(params[1]),\n                parse_css_int(params[2]),\n                alpha];\n      case 'hsla':\n        if (params.length !== 4) return null;\n        alpha = parse_css_float(params.pop());\n        // Fall through.\n      case 'hsl':\n        if (params.length !== 3) return null;\n        var h = (((parseFloat(params[0]) % 360) + 360) % 360) / 360;  // 0 .. 1\n        // NOTE(deanm): According to the CSS spec s/l should only be\n        // percentages, but we don't bother and let float or percentage.\n        var s = parse_css_float(params[1]);\n        var l = parse_css_float(params[2]);\n        var m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;\n        var m1 = l * 2 - m2;\n        return [clamp_css_byte(css_hue_to_rgb(m1, m2, h+1/3) * 255),\n                clamp_css_byte(css_hue_to_rgb(m1, m2, h) * 255),\n                clamp_css_byte(css_hue_to_rgb(m1, m2, h-1/3) * 255),\n                alpha];\n      default:\n        return null;\n    }\n  }\n\n  return null;\n}\n\ntry { exports.parseCSSColor = parseCSSColor } catch(e) { }\n","\nconst parseColorString = require('csscolorparser').parseCSSColor;\n\nmodule.exports = function parseColor(input) {\n    if (typeof input === 'string') {\n        const rgba = parseColorString(input);\n        if (!rgba) { return undefined; }\n\n        // GL expects all components to be in the range [0, 1] and to be\n        // multipled by the alpha value.\n        return [\n            rgba[0] / 255 * rgba[3],\n            rgba[1] / 255 * rgba[3],\n            rgba[2] / 255 * rgba[3],\n            rgba[3]\n        ];\n\n    } else if (Array.isArray(input)) {\n        return input;\n\n    } else {\n        return undefined;\n    }\n};\n","\n// Constants\nconst Xn = 0.950470, // D65 standard referent\n    Yn = 1,\n    Zn = 1.088830,\n    t0 = 4 / 29,\n    t1 = 6 / 29,\n    t2 = 3 * t1 * t1,\n    t3 = t1 * t1 * t1,\n    deg2rad = Math.PI / 180,\n    rad2deg = 180 / Math.PI;\n\n// Utilities\nfunction xyz2lab(t) {\n    return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n}\n\nfunction lab2xyz(t) {\n    return t > t1 ? t * t * t : t2 * (t - t0);\n}\n\nfunction xyz2rgb(x) {\n    return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n}\n\nfunction rgb2xyz(x) {\n    x /= 255;\n    return x <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n}\n\n// LAB\nfunction rgbToLab(rgbColor) {\n    const b = rgb2xyz(rgbColor[0]),\n        a = rgb2xyz(rgbColor[1]),\n        l = rgb2xyz(rgbColor[2]),\n        x = xyz2lab((0.4124564 * b + 0.3575761 * a + 0.1804375 * l) / Xn),\n        y = xyz2lab((0.2126729 * b + 0.7151522 * a + 0.0721750 * l) / Yn),\n        z = xyz2lab((0.0193339 * b + 0.1191920 * a + 0.9503041 * l) / Zn);\n\n    return [\n        116 * y - 16,\n        500 * (x - y),\n        200 * (y - z),\n        rgbColor[3]\n    ];\n}\n\nfunction labToRgb(labColor) {\n    let y = (labColor[0] + 16) / 116,\n        x = isNaN(labColor[1]) ? y : y + labColor[1] / 500,\n        z = isNaN(labColor[2]) ? y : y - labColor[2] / 200;\n    y = Yn * lab2xyz(y);\n    x = Xn * lab2xyz(x);\n    z = Zn * lab2xyz(z);\n    return [\n        xyz2rgb(3.2404542 * x - 1.5371385 * y - 0.4985314 * z), // D65 -> sRGB\n        xyz2rgb(-0.9692660 * x + 1.8760108 * y + 0.0415560 * z),\n        xyz2rgb(0.0556434 * x - 0.2040259 * y + 1.0572252 * z),\n        labColor[3]\n    ];\n}\n\n// HCL\nfunction rgbToHcl(rgbColor) {\n    const labColor = rgbToLab(rgbColor);\n    const l = labColor[0],\n        a = labColor[1],\n        b = labColor[2];\n    const h = Math.atan2(b, a) * rad2deg;\n    return [\n        h < 0 ? h + 360 : h,\n        Math.sqrt(a * a + b * b),\n        l,\n        rgbColor[3]\n    ];\n}\n\nfunction hclToRgb(hclColor) {\n    const h = hclColor[0] * deg2rad,\n        c = hclColor[1],\n        l = hclColor[2];\n    return labToRgb([\n        l,\n        Math.cos(h) * c,\n        Math.sin(h) * c,\n        hclColor[3]\n    ]);\n}\n\nmodule.exports = {\n    lab: {\n        forward: rgbToLab,\n        reverse: labToRgb\n    },\n    hcl: {\n        forward: rgbToHcl,\n        reverse: hclToRgb\n    }\n};\n","/*\nol-mapbox-style - Use Mapbox Style objects with OpenLayers\nCopyright 2016-present Boundless Spatial, Inc.\nLicense: https://raw.githubusercontent.com/boundlessgeo/ol-mapbox-gl-style/master/LICENSE\n*/\n\nimport glfun from '@mapbox/mapbox-gl-style-spec/function';\nimport mb2css from 'mapbox-to-css-font';\nimport applyStyleFunction from './stylefunction';\nimport googleFonts from 'webfont-matcher/lib/fonts/google';\nimport {fromLonLat} from 'ol/proj';\nimport {createXYZ} from 'ol/tilegrid';\nimport Map from 'ol/Map';\nimport GeoJSON from 'ol/format/GeoJSON';\nimport MVT from 'ol/format/MVT';\nimport {unByKey} from 'ol/Observable';\nimport TileLayer from 'ol/layer/Tile';\nimport VectorLayer from 'ol/layer/Vector';\nimport VectorTileLayer from 'ol/layer/VectorTile';\nimport TileJSON from 'ol/source/TileJSON';\nimport VectorSource from 'ol/source/Vector';\nimport VectorTileSource from 'ol/source/VectorTile';\nimport XYZ from 'ol/source/XYZ';\n\nvar availableFonts;\n\nfunction loadFont(fonts) {\n  var i, ii;\n  if (!Array.isArray(fonts)) {\n    var stops = fonts.stops;\n    if (stops) {\n      for (i = 0, ii = stops.length; i < ii; ++i) {\n        loadFont(stops[i][1]);\n      }\n    }\n    return;\n  }\n  var googleFamilies = googleFonts.getNames();\n  var families = fonts.map(function(font) {\n    return mb2css(font, 1).split(' 1px ')[1].replace(/\"/g, '');\n  });\n  for (i = 0, ii = families.length; i < ii; ++i) {\n    var family = families[i];\n    var font = fonts[i];\n    if (googleFamilies.indexOf(family) !== -1) {\n      if (!availableFonts) {\n        availableFonts = [];\n      }\n      if (availableFonts.indexOf(font) == -1) {\n        availableFonts.push(font);\n        var fontUrl = 'https://fonts.googleapis.com/css?family=' + family.replace(/ /g, '+');\n        if (!document.querySelector('link[href=\"' + fontUrl + '\"]')) {\n          var markup = document.createElement('link');\n          markup.href = fontUrl;\n          markup.rel = 'stylesheet';\n          document.getElementsByTagName('head')[0].appendChild(markup);\n        }\n      }\n      break;\n    }\n  }\n}\n\nvar defaultFont = ['Open Sans Regular', 'Arial Regular'];\n\nfunction preprocess(layer) {\n  if ('layout' in layer && 'text-field' in layer.layout) {\n    loadFont(layer.layout['text-font'] || defaultFont);\n  }\n}\n\nvar spriteRegEx = /^(.*)(\\?.*)$/;\n\nfunction withPath(url, path) {\n  if (path && url.indexOf('http') != 0) {\n    url = path + url;\n  }\n  return url;\n}\n\nfunction toSpriteUrl(url, path, extension) {\n  url = withPath(url, path);\n  var parts = url.match(spriteRegEx);\n  return parts ?\n    parts[1] + extension + (parts.length > 2 ? parts[2] : '') :\n    url + extension;\n}\n\n/**\n * Applies a style function to an `ol.layer.VectorTile` or `ol.layer.Vector`\n * with an `ol.source.VectorTile` or an `ol.source.Vector`. The style function\n * will render all layers from the `glStyle` object that use the specified\n * `source`, or a subset of layers from the same source. The source needs to be\n * a `\"type\": \"vector\"`, `\"type\": \"geojson\"` or `\"type\": \"raster\"` source.\n *\n * @param {ol.layer.VectorTile} layer OpenLayers layer.\n * @param {string|Object} glStyle Mapbox Style object.\n * @param {string} source `source` key or an array of layer `id`s from the\n * Mapbox Style object. When a `source` key is provided, all layers for the\n * specified source will be included in the style function. When layer `id`s\n * are provided, they must be from layers that use the same source.\n * @param {string} [path=undefined] Path of the style file. Only required when\n * a relative path is used with the `\"sprite\"` property of the style.\n * @param {Array<number>} [resolutions=undefined] Resolutions for mapping resolution to zoom level.\n * @return {Promise} Promise which will be resolved when the style can be used\n * for rendering.\n */\nexport function applyStyle(layer, glStyle, source, path, resolutions) {\n  return new Promise(function(resolve, reject) {\n\n    if (typeof glStyle != 'object') {\n      glStyle = JSON.parse(glStyle);\n    }\n    if (glStyle.version != 8) {\n      reject(new Error('glStyle version 8 required.'));\n    }\n    var spriteScale, spriteData, spriteImageUrl;\n    if (glStyle.sprite) {\n      spriteScale = window.devicePixelRatio >= 1.5 ? 0.5 : 1;\n      var sizeFactor = spriteScale == 0.5 ? '@2x' : '';\n      var spriteUrl = toSpriteUrl(glStyle.sprite, path, sizeFactor + '.json');\n\n      fetch(spriteUrl, {credentials: 'same-origin'})\n        .then(function(response) {\n          // if the response is ready return the JSON promise\n          if (response.status === 200) {\n            return response.json();\n          } else if (sizeFactor !== '') {\n            // return the JSON promise for the low-resolution sprites.\n            sizeFactor = '';\n            spriteUrl = toSpriteUrl(glStyle.sprite, path, '.json');\n            return fetch(spriteUrl, {credentials: 'same-origin'}).then(r => r.json());\n          }\n        })\n        .then(function(spritesJson) {\n          if (spritesJson === undefined) {\n            throw 'No sprites found.';\n          }\n          spriteData = spritesJson;\n          spriteImageUrl = toSpriteUrl(glStyle.sprite, path, sizeFactor + '.png');\n          onChange();\n        })\n        .catch(function(err) {\n          console.error(err);\n          reject(new Error('Sprites cannot be loaded from ' + spriteUrl));\n        });\n    }\n\n    var style;\n    function onChange() {\n      if (!style && (!glStyle.sprite || spriteData) && (!availableFonts || availableFonts.length > 0)) {\n        style = applyStyleFunction(layer, glStyle, source, resolutions, spriteData, spriteImageUrl, availableFonts);\n        resolve();\n      } else if (style) {\n        layer.setStyle(style);\n      }\n    }\n\n    if (layer instanceof VectorTileLayer || layer instanceof VectorLayer) {\n      try {\n        var layers = glStyle.layers;\n        for (var i = 0, ii = layers.length; i < ii; ++i) {\n          if (typeof source == 'string' && layers[i].source == source || source.indexOf(layers[i].id) >= 0) {\n            preprocess(layers[i]);\n          }\n        }\n        onChange();\n      } catch (e) {\n        setTimeout(function() {\n          reject(e);\n        }, 0);\n      }\n    }\n  });\n}\n\nfunction setBackground(map, layer) {\n  function updateStyle() {\n    var element = map.getTargetElement();\n    if (!element) {\n      return;\n    }\n    var layout = layer.layout || {};\n    var paint = layer.paint || {};\n    var zoom = map.getView().getZoom();\n    if ('background-color' in paint) {\n      var bg = glfun(paint['background-color'], {function: 'interpolated', type: 'color'})(zoom);\n      if (Array.isArray(bg)) {\n        bg = 'rgba(' +\n            Math.round(bg[0] * 255) + ',' +\n            Math.round(bg[1] * 255) + ',' +\n            Math.round(bg[2] * 255) + ',' +\n            (bg[3] ? bg[3] : 1) + ')';\n      }\n      element.style.backgroundColor = bg;\n    }\n    if ('background-opacity' in paint) {\n      element.style.backgroundOpacity =\n          glfun(paint['background-opacity'], {function: 'interpolated', type: 'number'})(zoom);\n    }\n    if (layout.visibility == 'none') {\n      element.style.backgroundColor = '';\n      element.style.backgroundOpacity = '';\n    }\n  }\n  if (map.getTargetElement()) {\n    updateStyle();\n  }\n  map.on(['change:resolution', 'change:target'], updateStyle);\n}\n\n/**\n * Applies properties of the Mapbox Style's first `background` layer to the map.\n * @param {ol.Map} map OpenLayers Map.\n * @param {Object} glStyle Mapbox Style object.\n */\nexport function applyBackground(map, glStyle) {\n  glStyle.layers.some(function(l) {\n    if (l.type == 'background') {\n      setBackground(map, l);\n      return true;\n    }\n  });\n}\n\nfunction getSourceIdByRef(layers, ref) {\n  var sourceId;\n  layers.some(function(layer) {\n    if (layer.id == ref) {\n      sourceId = layer.source;\n      return true;\n    }\n  });\n  return sourceId;\n}\n\nfunction processStyle(glStyle, map, baseUrl, host, path, accessToken) {\n  var view = map.getView();\n  if ('center' in glStyle && !view.getCenter()) {\n    view.setCenter(fromLonLat(glStyle.center));\n  }\n  if ('zoom' in glStyle && view.getZoom() === undefined) {\n    view.setZoom(glStyle.zoom);\n  }\n  if (!view.getCenter() || view.getZoom() === undefined) {\n    view.fit(view.getProjection().getExtent(), {\n      nearest: true,\n      size: map.getSize()\n    });\n  }\n  if (glStyle.sprite) {\n    if (glStyle.sprite.indexOf('mapbox://') == 0) {\n      glStyle.sprite = baseUrl + '/sprite' + accessToken;\n    } else if (glStyle.sprite.indexOf('http') != 0) {\n      glStyle.sprite = (host ? (host + path) : '') + glStyle.sprite + accessToken;\n    }\n  }\n\n  var glLayers = glStyle.layers;\n  var geoJsonFormat = new GeoJSON();\n  var layerIds = [];\n\n  function finalizeLayer(layer) {\n    if (layerIds.length > 0) {\n      map.addLayer(layer);\n      var setStyle = function() {\n        applyStyle(layer, glStyle, layerIds, path).then(function() {\n          layer.setVisible(true);\n        }, function(e) {\n          /*eslint no-console: [\"error\", { allow: [\"error\"] }] */\n          console.error(e);\n        });\n      };\n      if (layer.getSource()) {\n        setStyle();\n      } else {\n        layer.once('change:source', setStyle);\n      }\n    }\n  }\n\n  var glLayer, glSource, glSourceId, id, layer, mapid, url;\n  for (var i = 0, ii = glLayers.length; i < ii; ++i) {\n    glLayer = glLayers[i];\n    if (glLayer.type == 'background') {\n      setBackground(map, glLayer);\n    } else {\n      id = glLayer.source || getSourceIdByRef(glLayers, glLayer.ref);\n      if (id != glSourceId) {\n        finalizeLayer(layer);\n        layerIds = [];\n        glSource = glStyle.sources[id];\n        url = glSource.url;\n        var tiles = glSource.tiles;\n        if (url) {\n          if (url.indexOf('mapbox://') == 0) {\n            mapid = url.replace('mapbox://', '');\n            tiles = ['a', 'b', 'c', 'd'].map(function(host) {\n              return 'https://' + host + '.tiles.mapbox.com/v4/' + mapid +\n                  '/{z}/{x}/{y}.' +\n                  (glSource.type == 'vector' ? 'vector.pbf' : 'png') +\n                  accessToken;\n            });\n          }\n        }\n\n        if (glSource.type == 'vector') {\n          layer = tiles ? (function() {\n            var tileGrid = createXYZ({\n              tileSize: 512,\n              maxZoom: 'maxzoom' in glSource ? glSource.maxzoom : 22,\n              minZoom: glSource.minzoom\n            });\n            return new VectorTileLayer({\n              declutter: true,\n              maxResolution: tileGrid.getMinZoom() > 0 ?\n                tileGrid.getResolution(tileGrid.getMinZoom()) : undefined,\n              source: new VectorTileSource({\n                attributions: glSource.attribution,\n                format: new MVT(),\n                tileGrid: tileGrid,\n                urls: tiles\n              }),\n              visible: false,\n              zIndex: i\n            });\n          })() : (function() {\n            var layer = new VectorTileLayer({\n              declutter: true,\n              visible: false,\n              zIndex: i\n            });\n            var tilejson = new TileJSON({\n              url: url\n            });\n            var key = tilejson.on('change', function() {\n              if (tilejson.getState() == 'ready') {\n                var tileJSONDoc = tilejson.getTileJSON();\n                var tiles = Array.isArray(tileJSONDoc.tiles) ? tileJSONDoc.tiles : [tileJSONDoc.tiles];\n                for (var i = 0, ii = tiles.length; i < ii; ++i) {\n                  var tile = tiles[i];\n                  if (tile.indexOf('http') != 0) {\n                    tiles[i] = glSource.url + tile;\n                  }\n                }\n                var tileGrid = tilejson.getTileGrid();\n                layer.setSource(new VectorTileSource({\n                  attributions: tilejson.getAttributions() || tileJSONDoc.attribution,\n                  format: new MVT(),\n                  tileGrid: createXYZ({\n                    minZoom: tileGrid.getMinZoom(),\n                    maxZoom: tileGrid.getMaxZoom(),\n                    tileSize: 512\n                  }),\n                  urls: tiles\n                }));\n                if (tileGrid.getMinZoom() > 0) {\n                  layer.setMaxResolution(\n                    tileGrid.getResolution(tileGrid.getMinZoom()));\n                }\n                unByKey(key);\n              }\n            });\n            return layer;\n          })();\n        } else if (glSource.type == 'raster') {\n          var source;\n          if (!glSource.tiles) {\n            source = (function() {\n              return new TileJSON({\n                url: url,\n                crossOrigin: 'anonymous'\n              });\n            })();\n          } else {\n            source = new XYZ({\n              attributions: glSource.attribution,\n              minZoom: glSource.minzoom,\n              maxZoom: 'maxzoom' in glSource ? glSource.maxzoom : 22,\n              tileSize: glSource.tileSize || 512,\n              url: url,\n              urls: glSource.tiles,\n              crossOrigin: 'anonymous'\n            });\n          }\n          source.setTileLoadFunction(function(tile, src) {\n            if (src.indexOf('{bbox-epsg-3857}') != -1) {\n              var bbox = source.getTileGrid().getTileCoordExtent(tile.getTileCoord());\n              src = src.replace('{bbox-epsg-3857}', bbox.toString());\n            }\n            tile.getImage().src = src;\n          });\n          layer = new TileLayer({\n            source: source,\n            visible: glLayer.layout ? glLayer.layout.visibility !== 'none' : true\n          });\n        } else if (glSource.type == 'geojson') {\n          var data = glSource.data;\n          var features, geoJsonUrl;\n          if (typeof data == 'string') {\n            geoJsonUrl = withPath(data, path);\n          } else {\n            features = geoJsonFormat.readFeatures(data, {featureProjection: 'EPSG:3857'});\n          }\n          layer = new VectorLayer({\n            source: new VectorSource({\n              attributions: glSource.attribution,\n              features: features,\n              format: geoJsonFormat,\n              url: geoJsonUrl\n            }),\n            visible: false,\n            zIndex: i\n          });\n        }\n        glSourceId = id;\n      }\n      layerIds.push(glLayer.id);\n    }\n  }\n  finalizeLayer(layer);\n  map.set('mapbox-style', glStyle);\n}\n\n/**\n * Loads and applies a Mapbox Style object to an OpenLayers Map. This includes\n * the map background, the layers, the center and the zoom.\n *\n * The center and zoom will only be set if present in the Mapbox Style document,\n * and if not already set on the OpenLayers map.\n *\n * Layers will be added to the OpenLayers map, without affecting any layers that\n * might already be set on the map.\n *\n * Layers added by `apply()` will have two additional properties:\n *\n *  * `mapbox-source`: The `id` of the Mapbox Style document's source that the\n *    OpenLayers layer was created from. Usually `apply()` creates one\n *    OpenLayers layer per Mapbox Style source, unless the layer stack has\n *    layers from different sources in between.\n *  * `mapbox-layers`: The `id`s of the Mapbox Style document's layers that are\n *    included in the OpenLayers layer.\n *\n * The map returned by this function will have an additional `mapbox-style`\n * property which holds the Mapbox Style object.\n *\n * @param {ol.Map|HTMLElement|string} map Either an existing OpenLayers Map\n * instance, or a HTML element, or the id of a HTML element that will be the\n * target of a new OpenLayers Map.\n * @param {string|Object} style JSON style object or style url pointing to a\n * Mapbox Style object. When using Mapbox APIs, the url must contain an access\n * token and look like\n * `https://api.mapbox.com/styles/v1/mapbox/bright-v9?access_token=[your_access_token_here]`.\n * When passed as JSON style object, all OpenLayers layers created by `apply()`\n * will be immediately available, but they may not have a source yet (i.e. when\n * they are defined by a TileJSON url in the Mapbox Style document). When passed\n * as style url, layers will be added to the map when the Mapbox Style document\n * is loaded and parsed.\n * @return {ol.Map} The OpenLayers Map instance that will be populated with the\n * contents described in the Mapbox Style object.\n */\nexport function apply(map, style) {\n\n  var accessToken, baseUrl, host, path;\n  accessToken = baseUrl = host = path = '';\n\n  if (!(map instanceof Map)) {\n    map = new Map({\n      target: map\n    });\n  }\n\n  if (typeof style === 'string') {\n    var parts = style.match(spriteRegEx);\n    if (parts) {\n      baseUrl = parts[1];\n      accessToken = parts.length > 2 ? parts[2] : '';\n    }\n\n    fetch(style, {\n      credentials: 'same-origin'\n    })\n      .then(function(response) {\n        return response.json();\n      })\n      .then(function(glStyle) {\n        var a = document.createElement('A');\n        a.href = style;\n        path = a.pathname.split('/').slice(0, -1).join('/') + '/';\n        host = style.substr(0, style.indexOf(path));\n\n        processStyle(glStyle, map, baseUrl, host, path, accessToken);\n      })\n      .catch(function(err) {\n        console.error(err);\n        throw new Error('Could not load ' + style);\n      });\n  } else {\n    setTimeout(function() {\n      processStyle(style, map);\n    }, 0);\n  }\n  return map;\n}\n\n/**\n * Get the OpenLayers layer instance that contains the provided Mapbox Style\n * `layer`. Note that multiple Mapbox Style layers are combined in a single\n * OpenLayers layer instance when they use the same Mapbox Style `source`.\n * @param {ol.Map} map OpenLayers Map.\n * @param {string} layerId Mapbox Style layer id.\n * @return {ol.layer.Layer} layer OpenLayers layer instance.\n */\nexport function getLayer(map, layerId) {\n  const layers = map.getLayers().getArray();\n  for (let i = 0, ii = layers.length; i < ii; ++i) {\n    if (layers[i].get('mapbox-layers').indexOf(layerId) !== -1) {\n      return layers[i];\n    }\n  }\n}\n\n/**\n * Get the OpenLayers source instance for the provided Mapbox Style `source`.\n * @param {ol.Map} map OpenLayers Map.\n * @param {string} sourceId Mapbox Style source id.\n * @return {ol.layer.Layer} layer OpenLayers layer instance.\n */\nexport function getSource(map, sourceId) {\n  const layers = map.getLayers().getArray();\n  for (let i = 0, ii = layers.length; i < ii; ++i) {\n    const source = layers[i].getSource();\n    if (layers[i].get('mapbox-source').indexOf(sourceId) !== -1) {\n      return source;\n    }\n  }\n}\n","import {apply, applyBackground, applyStyle} from './index';\nimport stylefunction from './stylefunction';\n\nexport default {\n  apply: apply,\n  applyBackground: applyBackground,\n  applyStyle: applyStyle,\n  stylefunction: stylefunction\n};\n"],"sourceRoot":""}